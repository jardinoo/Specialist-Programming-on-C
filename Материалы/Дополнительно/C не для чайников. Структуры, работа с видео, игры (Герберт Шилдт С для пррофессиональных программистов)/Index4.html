<html>

<head>
   <TITLE>C</TITLE>
</head>

<body bgcolor="#00ffff">
<a name="top"></a>
<p><div align="center"><b><font size="+1" face="Arial"><a name="4">Глава 4. Графика </a></font></b></div></p>


<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>В этой главе приводится базовый набор функций графики,
которые позволяют рисовать (отображать на экране) точки, линии, прямоугольники,
окружности, используя возможности графических адаптеров CGA или EGA. Эти
программы используются как основа, на которой строятся функции графики более
высокого уровня. Для более детального изучения этих базовых графических функций
предлагается книга &quot;С: The Complete Reference&quot; Herb Schild (Osborn /
McGrow-Hall, 1987).

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;text-align:justify;text-indent:
27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Помимо краткого представления базовых функций графики,
в этой главе приводятся следующие программы:

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>- сохранение
графических изображений в файле на диске;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>- загрузка графических
изображений из файла;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>- вращение объектов в
двумерном пространстве;

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>- копирование или пересылка графических
изображений.

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>В конце главы привевен текст
&quot;программы-художника&quot;, позволяющей рисовать на экране терминала, с
использованием клавиш перемещения курсора.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;text-align:justify;text-indent:
27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>По мере возрастания вашего опыта по использованию
функций графики, вы сможете самостоятельно разрабатывать хорошие программы.
Например, используя функции сохранения и загрузки графических изображений, вы
сможете создавать графики или диаграммы и успешно использовать их в случае
необходимости. Используя функции вращения изображений объектов, вы сможете
разрабатывать программы &quot;звездных войн&quot; - образец &quot;живой&quot;
графики, которые будут представлять большой интерес для вас. Вы сможете также,
использовать эти функции как основу для использования систем
автоматизированного проектирования (CAD/CAM system).

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
133.2pt;margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>Для корректного использования программ, описаных в этой главе, вам
необходимы компьютеры типа IBM PC XT, IBM PC AT или другие совместимые с ними
модели, снабженные графическими адаптерами CGA или EGA. Все программы,
приведенные в данной главе, кроме программ изображения точки,
аппаратно-независимы, и вы можете с минимальными усилиями сделать их рабочими
на других типах графических машин. 

<!--<br><br><a href="#top">наверх</a>-->
<p><div align="center"><b><font size="+1"><i><a name="4-1">Видеорежимы и цветовая палитра </a></i></font></b></div></p>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Перед использованием каких-либо функций графики
компьютер должен быть переведен в соответствующий видеорежим. Для компьютеров
типа IBM PC это означает, что должны быть выбраны подходящие режим и палитра.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;text-align:justify;text-indent:
27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>В таблице 4-1 приведены различные видеорежимы, в
которых могут работать компьютеры IBM PC. Для функций, приведенных в этой
главе, требуется 4 видеорежим, предполагающий использование цветного
графического дисплея с размерностью экрана 320 на 200. Хотя адаптер EGA
поддерживает и режимы с расширенной разрешающей способностью дисплея, 4
видеорежим выбран в качестве базового для разработки и использования функций
графики в связи с тем, что он поддерживается как адаптером EGA, так и CGA.
Использование особых режимов EGA требует только изменения функций записи точки
(смотри книгу по использованию графики в EGA &quot;Advance Grafics in C&quot;
Nelson Jobson Osborn/McGrow-Hall, 1987). Вам необходимо запомнить, что во всех
кодах верхний левый угол имеет координаты 0,0.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
11.1pt;margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>BIOS-прерывание 16, функция 0, устанавливает видеорежим и используется
в функции mode(), текст которой приведен ниже. Но прежде чем вы ознакомитесь с
ней, предлагаем вам внимательно изучить все видеорежимы, поддерживаемые
соответствующими адаптерами. Для этого обратитесь к таблице 4-1.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
11.1pt;margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:10.0pt'>Таблица 4-1 Режимы
терминала для машин IBM PC

<table border=0 cellspacing=0 cellpadding=0 style='margin-left:24.0pt;
 border-collapse:collapse;mso-padding-alt:0cm 2.0pt 0cm 2.0pt'>
 <tr>
  <td width=11 valign=top style='width:8.0pt;border-top:double 2.25pt;
  border-left:double 2.25pt;border-bottom:solid .75pt;border-right:solid .75pt;
  border-color:windowtext;padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  5.55pt;margin-left:0cm;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><![if !supportEmptyParas]>&nbsp;<![endif]><span
  style='font-size:10.0pt'>
  </td>
  <td width=48 valign=top style='width:36.0pt;border-top:double windowtext 2.25pt;
  border-left:none;border-bottom:solid windowtext .75pt;border-right:solid windowtext .75pt;
  mso-border-left-alt:solid windowtext .75pt;padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  11.1pt;margin-left:0cm;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><span style='font-size:10.0pt'>Режим
  </td>
  <td width=480 valign=top style='width:360.0pt;border-top:double windowtext 2.25pt;
  border-left:none;border-bottom:solid windowtext .75pt;border-right:double windowtext 2.25pt;
  mso-border-left-alt:solid windowtext .75pt;padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:52.8pt;
  5.55pt;margin-left:159.5pt;text-align:justify;text-indent:-93.5pt;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>Тип Размерность Адаптер экрана
  </td>
 </tr>
 <tr>
  <td width=11 valign=top style='width:8.0pt;border-top:none;border-left:double windowtext 2.25pt;
  border-bottom:solid windowtext .75pt;border-right:solid windowtext .75pt;
  mso-border-top-alt:solid windowtext .75pt;padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  5.55pt;margin-left:0cm;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><![if !supportEmptyParas]>&nbsp;<![endif]><span
  style='font-size:10.0pt'>
  </td>
  <td width=48 valign=top style='width:36.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext .75pt;border-right:solid windowtext .75pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='11.1pt;margin-right:0cm;
  0cm;margin-left:11.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>0
  <p class=MsoNormal style='margin-left:11.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>1
  <p class=MsoNormal style='margin-left:11.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>2
  <p class=MsoNormal style='margin-left:11.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>3
  <p class=MsoNormal style='margin-left:11.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>4
  <p class=MsoNormal style='margin-left:11.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>5
  <p class=MsoNormal style='margin-left:11.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>6
  <p class=MsoNormal style='margin-left:11.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>7
  <p class=MsoNormal style='margin-left:11.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>8
  <p class=MsoNormal style='margin-left:11.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>9
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>10
  <p class=MsoNormal style='11.1pt;margin-right:0cm;
  0cm;margin-left:5.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>13
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>14
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>15
  <p class=MsoNormal style='5.55pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>-----
  </td>
  <td width=480 valign=top style='width:360.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext .75pt;border-right:double windowtext 2.25pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='11.1pt;margin-right:0cm;
  0cm;margin-left:5.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>алфавитно-цифровой,
  ч/б<span style="mso-spacerun: yes">      </span>40х25<span
  style="mso-spacerun: yes">    </span>CGA, EGA
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>алфавитно-цифровой,
  16 цв.<span style="mso-spacerun: yes">   </span>40х25<span
  style="mso-spacerun: yes">    </span>CGA, EGA
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>алфавитно-цифровой,
  ч/б<span style="mso-spacerun: yes">      </span>80х25<span
  style="mso-spacerun: yes">    </span>CGA, EGA
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>алфавитно-цифровой,
  16 цв.<span style="mso-spacerun: yes">   </span>80х25<span
  style="mso-spacerun: yes">    </span>CGA, EGA
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>графический, 4
  цвета<span style="mso-spacerun: yes">       </span>320х200<span
  style="mso-spacerun: yes">    </span>CGA, EGA
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>графический, 4 серых
  тона<span style="mso-spacerun: yes">  </span>320х200<span
  style="mso-spacerun: yes">    </span>CGA, EGA
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>графический,
  ч/б<span style="mso-spacerun: yes">           </span>640х200<span
  style="mso-spacerun: yes">    </span>CGA, EGA
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>алфавитно-цифровой,
  ч/б<span style="mso-spacerun: yes">      </span>80х25<span
  style="mso-spacerun: yes">   </span>монохромный
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>графический, 16
  цветов<span style="mso-spacerun: yes">     </span>160х200<span
  style="mso-spacerun: yes">     </span>PCjr
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>графический, 16
  цветов<span style="mso-spacerun: yes">     </span>320х200<span
  style="mso-spacerun: yes">     </span>PCjr
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>графический, 4
  цвета-PCjr<span style="mso-spacerun: yes">  </span>640х200<span
  style="mso-spacerun: yes">    </span>PCjr, EGA
  <p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>16 цветов-EGA
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>графический, 16
  цветов<span style="mso-spacerun: yes">     </span>320х200<span
  style="mso-spacerun: yes">      </span>EGA
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>графический, 16
  цветов<span style="mso-spacerun: yes">     </span>640х200<span
  style="mso-spacerun: yes">      </span>EGA
  <p class=MsoNormal style='margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>графический, 4
  цвета<span style="mso-spacerun: yes">       </span>640х350<span
  style="mso-spacerun: yes">      </span>EGA
  <p class=MsoNormal style='5.55pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>----------------------------------------------------------
  </td>
 </tr>
 <tr>
  <td width=11 valign=top style='width:8.0pt;border-top:none;border-left:double windowtext 2.25pt;
  border-bottom:double windowtext 2.25pt;border-right:solid windowtext .75pt;
  mso-border-top-alt:solid windowtext .75pt;padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  5.55pt;margin-left:0cm;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><![if !supportEmptyParas]>&nbsp;<![endif]><span
  style='font-size:10.0pt'>
  </td>
  <td width=48 valign=top style='width:36.0pt;border-top:none;border-left:none;
  border-bottom:double windowtext 2.25pt;border-right:solid windowtext .75pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  11.1pt;margin-left:22.0pt;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><span style='font-size:10.0pt'>А
  </td>
  <td width=480 valign=top style='width:360.0pt;border-top:none;border-left:
  none;border-bottom:double windowtext 2.25pt;border-right:double windowtext 2.25pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>теперь приведем
  текст функции mode().

  </td>
 </tr>
</table>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Установка
видеорежима */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void mode(mode_code)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int mode_code;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>union REGS r;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.al = mode_code;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.ah = 0;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int86(0x10,&amp;r,&amp;r);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>В 4-ом режиме доступны две палитры (набора цветов).
Каждая палитра определяет четыре цвета, отображаемые на экране терминала. В IBM
PC палитра 0 определяет желтый, зеленый и красный цвета, палитра 1 определяет
белый, ярко-красный (пурпурный) и голубой цвета. Для каждой палитры четвертым
цветом является цвет фона, который обычно черный. BIOS-прерывание 16, функция
11, устанавливает палитру.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;text-align:justify;text-indent:
27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Функция pallet(), приведенная ниже, устанавливает
номер палитры, который задается в качестве значения ее аргумента:

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Установка палитры
*/

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void palette(pnum)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int pnum;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>union REGS r;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.bh=1;<span
style="mso-spacerun: yes">    </span>/* код 4 графического режима */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.bl=pnum; /* номер
палитры */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.ah=11;<span
style="mso-spacerun: yes">   </span>/* устанавливается для вызова палитры */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int86(0x10,&amp;r,&amp;r);

<!--<br><br><a href="#top">наверх</a>-->
<p><div align="center"><b><font size="+1"><i><a name="4-2">Запись точки растра </a></i></font></b></div></p>

<p class=MsoNormal style='0cm;margin-right:4.4pt;410.7pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Одной
из основных программ графики является программа записи точки растра -
наименьшей адресуемой точки на экране дисплея. В данном случае термин
&quot;точка растра&quot; будет использоваться для описания наименьшей адресуемой
точки в отдельных графических режимах. Так как функция записи точки растра
используется в других программах более высокого уровня, ее эффективность очень
важна для быстродействия программ верхних уровней, которые непосредственно
реализуют функции графики. На IBM PC и совместимых с ними компьютерах
существуют два способа вывода информации с использованием точек растра. Первый
способ, использующий прерывания ROM-BIOS, является наиболее простым, но и
наименее быстродействующим (слишком медленным для наших целей). Вторым и более
быстродействующими способом является размещение информации непосредственно в
видеопамяти дисплея (ROM). Именно этот метод и рассматривается ниже. 

<!--<br><br><a href="#top">наверх</a>-->
<p><div align="center"><b><font size="+1"><i><a name="4-3">Работа адаптеров CGA/EGA в графическом режиме  </a></i></font></b></div></p>

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Адаптер
CGA всегда располагается в видеопамяти по адресу 8000000h. Адаптер EGA имеет
аналогичное расположение для тех режимов, которые совместимы с режимами CGA
(более полную информацию о аппаратных средствах поддержки графики вы можете
получить в руководстве &quot;IBM Technical Reference&quot;). В 4 графическом
режиме каждый байт содержит информацию о цвете для 4 точек растра (для каждой
точки растра по 2 бита). Следовательно, для работы с экраном размерностью 320
на 200 требуется 16К памяти. Так как два бита могут содержать только 4
различных значения, в 4 видеорежиме поддерживаются только 4 цвета. Значение
каждого двухбитового блока определяет цвет в соответствии с таблицей,
приведенной ниже:

<table border=0 cellspacing=0 cellpadding=0 style='margin-left:24.0pt;
 border-collapse:collapse;mso-padding-alt:0cm 2.0pt 0cm 2.0pt'>
 <tr>
  <td width=11 valign=top style='width:8.0pt;border-top:double 2.25pt;
  border-left:double 2.25pt;border-bottom:solid .75pt;border-right:solid .75pt;
  border-color:windowtext;padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  5.55pt;margin-left:0cm;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><![if !supportEmptyParas]>&nbsp;<![endif]><span
  style='font-size:10.0pt'>
  </td>
  <td width=80 valign=top style='width:60.0pt;border-top:double windowtext 2.25pt;
  border-left:none;border-bottom:solid windowtext .75pt;border-right:solid windowtext .75pt;
  mso-border-left-alt:solid windowtext .75pt;padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  5.55pt;margin-left:0cm;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><span style='font-size:10.0pt'>Значение
  </td>
  <td width=128 valign=top style='width:96.0pt;border-top:double windowtext 2.25pt;
  border-left:none;border-bottom:solid windowtext .75pt;border-right:solid windowtext .75pt;
  mso-border-left-alt:solid windowtext .75pt;padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  5.55pt;margin-left:5.5pt;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><span style='font-size:10.0pt'>Цвет в палитре
  </td>
  <td width=32 valign=top style='width:24.0pt;border-top:double windowtext 2.25pt;
  border-left:none;border-bottom:solid windowtext .75pt;border-right:solid windowtext .75pt;
  mso-border-left-alt:solid windowtext .75pt;padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  5.55pt;margin-left:0cm;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><span style='font-size:10.0pt'>0
  </td>
  <td width=136 valign=top style='width:102.0pt;border-top:double windowtext 2.25pt;
  border-left:none;border-bottom:solid windowtext .75pt;border-right:solid windowtext .75pt;
  mso-border-left-alt:solid windowtext .75pt;padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  5.55pt;margin-left:11.0pt;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><span style='font-size:10.0pt'>Цвет в палитре
  </td>
  <td width=32 valign=top style='width:24.0pt;border-top:double windowtext 2.25pt;
  border-left:none;border-bottom:solid windowtext .75pt;border-right:double windowtext 2.25pt;
  mso-border-left-alt:solid windowtext .75pt;padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  5.55pt;margin-left:0cm;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><span style='font-size:10.0pt'>1
  </td>
 </tr>
 <tr>
  <td width=11 valign=top style='width:8.0pt;border-top:none;border-left:double windowtext 2.25pt;
  border-bottom:double windowtext 2.25pt;border-right:solid windowtext .75pt;
  mso-border-top-alt:solid windowtext .75pt;padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  5.55pt;margin-left:0cm;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><![if !supportEmptyParas]>&nbsp;<![endif]><span
  style='font-size:10.0pt'>
  </td>
  <td width=80 valign=top style='width:60.0pt;border-top:none;border-left:none;
  border-bottom:double windowtext 2.25pt;border-right:solid windowtext .75pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='11.1pt;margin-right:0cm;
  0cm;margin-left:16.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>1
  <p class=MsoNormal style='margin-left:16.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>2
  <p class=MsoNormal style='0cm;margin-right:0cm;5.55pt;
  margin-left:16.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
  none'><span style='font-size:10.0pt'>3
  </td>
  <td width=128 valign=top style='width:96.0pt;border-top:none;border-left:
  none;border-bottom:double windowtext 2.25pt;border-right:solid windowtext .75pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  0cm;margin-left:33.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>фон
  <p class=MsoNormal style='margin-left:22.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>желтый
  <p class=MsoNormal style='margin-left:22.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>красный
  <p class=MsoNormal style='0cm;margin-right:0cm;5.55pt;
  margin-left:22.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
  none'><span style='font-size:10.0pt'>зеленый
  </td>
  <td width=32 valign=top style='width:24.0pt;border-top:none;border-left:none;
  border-bottom:double windowtext 2.25pt;border-right:solid windowtext .75pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  5.55pt;margin-left:0cm;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><![if !supportEmptyParas]>&nbsp;<![endif]><span
  style='font-size:10.0pt'>
  </td>
  <td width=136 valign=top style='width:102.0pt;border-top:none;border-left:
  none;border-bottom:double windowtext 2.25pt;border-right:solid windowtext .75pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  0cm;margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>фон
  <p class=MsoNormal style='margin-left:33.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>голубой
  <p class=MsoNormal style='margin-left:33.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>пурпурный
  <p class=MsoNormal style='0cm;margin-right:0cm;5.55pt;
  margin-left:33.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
  none'><span style='font-size:10.0pt'>булый
  </td>
  <td width=32 valign=top style='width:24.0pt;border-top:none;border-left:none;
  border-bottom:double windowtext 2.25pt;border-right:double windowtext 2.25pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='5.55pt;margin-right:0cm;
  5.55pt;margin-left:0cm;mso-hyphenate:none;mso-layout-grid-align:none;
  text-autospace:none'><![if !supportEmptyParas]>&nbsp;<![endif]><span
  style='font-size:10.0pt'>
  </td>
 </tr>
</table>

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;text-align:justify;text-indent:
27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Особенность адаптера CGA заключается в том, что четные
точки растра будут располагаться по адресу B8000000h, а нечетные - на 2000h
(8152 - в десятичном виде) байтов выше, т.е. по адресу B8002000h.
Следовательно, каждая строка точек растра требует 80 байтов (40 для четных
точек растра, 40 - для нечетных). Внутри каждого байта точки располагаются
слева направо, как они появляются на экране терминала. Это означает, что точка
растра с номером 0 занимает 6 и 7 биты, в то время, как точка растра с номером
3 - 0 и 1 биты.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;text-align:justify;text-indent:
27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Так как каждый байт кодирует значение четырех точек
растра, вы должны сохранять значение трех точек при изменении одной из них.
Лучший способ сделать это - создание битовой маски со всеми битами, установленными
в 1, кроме тех, которые будут изменяться. Значение битовой маски складывается
по схеме &quot;И&quot; с действительным значением байта, а затем полученное
значение складывается по схеме &quot;ИЛИ&quot; с новым значением. Однако
ситуация несколько меняется, если вы хотите сложить по схеме &quot;НЕ-ИЛИ&quot;
новое и старое значения. В этом случае вы просто складываете по схеме
&quot;ИЛИ&quot; старое значение байта с 0, а затем складываете по схеме
&quot;НЕ-ИЛИ&quot; новое двоичное представление цвета и получаете результат.
Адрес требуемого байта определяется путем умножения значения координаты X на
40, а затем добавляется значение координаты Y, деленное на

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;text-align:justify;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>4. Для того,чтобы
определить, находится ли точка растра в четном или нечетном блоке памяти,
используется остаток от деления значения координаты Х на 2. Если остаток равен
0, блок является четным (используется первый блок), в противном случае - блок
нечетный (используется второй блок). Требуемые биты внутри байта вычисляются
путем выполнения деления по модулю 4. Остаток

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;text-align:justify;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>определяет номер
двухбитового пакета, который содержит информацию о требуемых точках растра. Для
установки байта режима цвета и битовой маски используются операторы побитового
сдвига. Хотя манипулирование битами в функции mempoint() несколько запутано,
вы, однако, без труда разберетесь в ней, если тщательно изучите что именно и
как она делает.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Запись точки в
CGA/EGA */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
mempoint(x,y,color_code)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x,y,color_code;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>union mask 

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char c[2];

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int i;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>bit_mask;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
i,index,bit_position;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>unsigned char t;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char xor; /*
&quot;НЕ-ИЛИ&quot; цвета в случае его изменения */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:352.0pt;.0001pt;text-indent:-286.0pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>char far *ptr=(char far *) 0xB8000000; /* точка в памяти CGA */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>bit_mask.i=0xFF3F; /*
11111111 00111111 в двоичном коде */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (x&lt;0 || x&gt;199
|| y&lt;0 || y&gt;319) return;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xor=color_code &amp;
128; /* проверка, устанавливался ли

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;text-indent:137.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>режим &quot;НЕ-ИЛИ&quot; */ color_code=color_code &amp; 127; /* маска
старших битов */

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/*<span
style="mso-spacerun: yes">  </span>установка битовой маски и битов режима цвета

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>в правую позицию */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:71.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>bit_position=y%4; /*
вычисление нужной позиции

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:71.5pt;.0001pt;text-indent:115.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>в байте */ color_code&lt;&lt;=2*(3-bit_position); /* сдвиг кода цвета

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:71.5pt;.0001pt;text-indent:148.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>в нужную позицию */ bit_mask.i&gt;&gt;=2*bit_position; /* сдвиг битовой
маски в

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:231.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>нужную позицию */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:71.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* определение
требуемого байта в памяти терминала */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>index=x*40+(y%4);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (x%2) index+=8152;
/* если нечетный, используется

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:214.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>второй блок */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* запись цвета */

<p class=MsoNormal align=center style='margin-right:4.4pt;text-align:center;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>if (!xor)<span style="mso-spacerun: yes">   </span>/*
режим изменения цвета */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:99.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>t=*(ptr+index) &amp;
bit_mask.c[0];

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:99.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*(ptr+index)=t|color_code;

<p class=MsoNormal align=center style='margin-right:4.4pt;text-align:center;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else 

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:99.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>t=*(ptr+index) |
(char)0;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:99.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*(ptr+index)=t &amp;
color_code;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='0cm;margin-right:4.4pt;555.0pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Заметим,
что тип указателя видеопамяти объявлен как far; это необходимо, если вы
транслируете в модели маленькой (small) памяти. Вы так же должны заметить, что
специальный маркер режима записи XOR, определенный в функциях ROM-BIOS,
используется и в функции mempoint(). 

<!--<br><br><a href="#top">наверх</a>-->
<p><div align="center"><b><font size="+1"><i><a name="4-4">Вычерчивание линий </a></i></font></b></div></p>


<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Функции вычерчивания линий являются основными
подпрограммами графики и используются для отображения линий в заданном цвете
путем задания ее начальных и конечных координат. В то время, как изображение
вертикальных и горизонтальных линий не представляет особого труда, более
трудной задачей является создание функций, которые рисуют линии вдоль
диагоналей. Например, какие точки составляют линию, вычерчиваемую от точки с
координатами 0,0 до точки с координатами 80,120?

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;text-align:justify;text-indent:
27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Один из подходов к разработке функций вычерчивания
линий использует отношение между смещением по координатам X и Y. Чтобы показать
этот подход в действии, проведем линию между точками с координатами 0,0 и 5,10.
Смещение по X равно 5, а по Y - 10. Отношение равно 1/2. Оно будет
использоватся при определении коэффициента зависимости, по которому должны
меняться координаты X и Y при изображении линий. В данном случае это означает,
что приращение координаты X составляет половину величины изменения координаты
Y. Начинающий программист часто использует этот метод при разработке функций
вычерчивания линий. Хотя такой подход математически верен и прост для
понимания, для его правильной работы и для того, чтобы избежать серьезных
ошибок округления, необходимо использовать математические операции с числами с
плавающей точкой. Это означает, что функции вычерчивания линий будут работать
довольно медленно, если в систему не будет включен математический сопроцессор
(например - Intel 8087). По этой причине этот метод используется довольно
редко.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:55.0pt;.0001pt;mso-hyphenate:none;tab-stops:367.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Наиболее
общий<span style="mso-spacerun: yes">    </span>метод<span style="mso-spacerun:
yes">    </span>изображения<span style="mso-spacerun: yes">    </span>линий<span
style='mso-tab-count:1'>                                                </span>включает

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>использование<span
style="mso-spacerun: yes">  </span>алгоритма<span style="mso-spacerun: yes"> 
</span>Брезенхама.<span style="mso-spacerun: yes">  </span>Хотя<span
style="mso-spacerun: yes">  </span>основой в нем служит

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>также отношение между
расстояниями по координатам X и Y, в данном

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>случае<span
style="mso-spacerun: yes">  </span>не<span style="mso-spacerun: yes"> 
</span>требуется<span style="mso-spacerun: yes">  </span>выполнять<span
style="mso-spacerun: yes">  </span>деление<span style="mso-spacerun: yes"> 
</span>или вычисление чисел с

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>плавающей<span
style="mso-spacerun: yes">  </span>точкой.<span style="mso-spacerun: yes"> 
</span>Вместо<span style="mso-spacerun: yes">  </span>этого,<span
style="mso-spacerun: yes">  </span>отношение<span style="mso-spacerun: yes"> 
</span>между<span style="mso-spacerun: yes">   </span>значениями

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>координат<span
style="mso-spacerun: yes">  </span>X<span style="mso-spacerun: yes"> 
</span>и<span style="mso-spacerun: yes">  </span>Y<span style="mso-spacerun:
yes">  </span>представляется<span style="mso-spacerun: yes">  </span>косвенным
образом через серии

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>сложений<span
style="mso-spacerun: yes">  </span>и<span style="mso-spacerun: yes"> 
</span>вычитаний.<span style="mso-spacerun: yes">  </span>Основной<span
style="mso-spacerun: yes">  </span>идеей<span style="mso-spacerun: yes"> 
</span>алгоритма<span style="mso-spacerun: yes">   </span>Брезенхама,

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>является<span
style="mso-spacerun: yes">   </span>регистрация<span style="mso-spacerun:
yes">   </span>средних<span style="mso-spacerun: yes">   </span>значений<span
style="mso-spacerun: yes">  </span><span style="mso-spacerun:
yes"> </span>погрешностей<span style="mso-spacerun: yes">  </span>между

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>идеальным
положением<span style="mso-spacerun: yes">  </span>каждой<span
style="mso-spacerun: yes">  </span>точки<span style="mso-spacerun: yes"> 
</span>и<span style="mso-spacerun: yes">  </span>той<span style="mso-spacerun:
yes">  </span>позицией<span style="mso-spacerun: yes">  </span>на<span
style="mso-spacerun: yes">  </span>экране

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>дисплея,<span
style="mso-spacerun: yes">  </span>в<span style="mso-spacerun: yes"> 
</span>которой она действительно отображается.<span style="mso-spacerun: yes"> 
</span>Погрешность

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>между идеальным и
действительным положением точки возникает ввиду

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>ограниченных<span
style="mso-spacerun: yes">  </span>возможностей<span style="mso-spacerun:
yes">  </span>технических<span style="mso-spacerun: yes">  </span>средств.<span
style="mso-spacerun: yes">  </span>Фактически<span style="mso-spacerun: yes"> 
</span>не

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>существует<span
style="mso-spacerun: yes">   </span>дисплеев<span style="mso-spacerun: yes">  
</span>с<span style="mso-spacerun: yes">    </span>бесконечно<span
style="mso-spacerun: yes">    </span>большой<span style="mso-spacerun: yes">   
</span>разрешающей

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>способностью,<span
style="mso-spacerun: yes">  </span>и,<span style="mso-spacerun: yes"> 
</span>следовательно, действительное положение каждой

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>точки на линии требует
наилучшей аппроксимации. В каждой итерации

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>цикла<span
style="mso-spacerun: yes">  </span>вычерчивания<span style="mso-spacerun:
yes">  </span>линии вызываются две переменные xerr и yerr,

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>которые<span
style="mso-spacerun: yes">  </span>увеличиваются<span style="mso-spacerun:
yes">  </span>в<span style="mso-spacerun: yes">  </span>зависимости<span
style="mso-spacerun: yes">   </span>от<span style="mso-spacerun: yes">  
</span>изменения<span style="mso-spacerun: yes">   </span>величин

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>координат<span
style="mso-spacerun: yes">  </span>X<span style="mso-spacerun: yes"> 
</span>и<span style="mso-spacerun: yes">  </span>Y<span style="mso-spacerun:
yes">  </span>соответственно.<span style="mso-spacerun: yes">  </span>Когда<span
style="mso-spacerun: yes">  </span>значение<span style="mso-spacerun: yes"> 
</span>погрешности

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>достигает
определенного значения,<span style="mso-spacerun: yes">  </span>оно<span
style="mso-spacerun: yes">  </span>вновь<span style="mso-spacerun: yes"> 
</span>устанавливается<span style="mso-spacerun: yes">  </span>в

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>исходное<span
style="mso-spacerun: yes">   </span>положение,<span style="mso-spacerun:
yes">   </span>а<span style="mso-spacerun: yes">   </span>соответствующий<span
style="mso-spacerun: yes">   </span>счетчик<span style="mso-spacerun: yes">  
</span>координат

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>увеличивается.<span
style="mso-spacerun: yes">  </span>Этот процесс продолжается до тех пор,<span
style="mso-spacerun: yes">  </span>пока линия

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>не будет полностью
вычерчена.<span style="mso-spacerun: yes">  </span>Функция line(),<span
style="mso-spacerun: yes">  </span>приведенная ниже,

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>реализует этот
метод.<span style="mso-spacerun: yes">  </span>Вы должны изучать ее до тех
пор,<span style="mso-spacerun: yes">  </span>пока<span style="mso-spacerun:
yes">  </span>не

<p class=MsoNormal style='0cm;margin-right:4.4pt;22.2pt;
margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>поймете механизма выполнения всех ее
операций. Заметим, что в ней 

<p class=MsoNormal style='margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>используется<span
style="mso-spacerun: yes">  </span>функция<span style="mso-spacerun: yes">  
</span>mempoint(),<span style="mso-spacerun: yes">   </span>разработанная<span
style="mso-spacerun: yes">   </span>ранее<span style="mso-spacerun: yes">  
</span>для

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>отображения точки на экране терминала. 

<p class=MsoNormal style='margin-left:33.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Вычерчивание линии
заданного цвета с использованием

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>алгоритма Брезенхама
*/

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
line(startx,starty,endx,endy,color)

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
startx,starty,endx,endy,color;

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>register int
t,distаnce;

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
xerr=0,yerr=0,delta_x,delta_y;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>int incx,incy;

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* вычисление
расстояния в обоих направлениях<span style="mso-spacerun: yes">  </span>*/

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta_x=endx-startx;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>delta_y=endy-starty;

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* определение
направления шага,

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>шаг вычисляется либо
по вертикальной, либо горизонтальной

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>линии<span
style="mso-spacerun: yes">   </span>*/

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (delta_x&gt;0)
incx=1;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else<span
style="mso-spacerun: yes">  </span>if (delta_x==0) incx=0;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else<span
style="mso-spacerun: yes">  </span>incx= -1;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (delta_y&gt;0)
incy=1;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else<span
style="mso-spacerun: yes">  </span>if (delta_y==0) incy=0;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>else<span style="mso-spacerun: yes"> 
</span>incy= -1;

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* определение какое
расстояние больше */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta_x=abs(delta_x);

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta_y=abs(delta_y);

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if
(delta_x&gt;delta_y) distance=delta_x;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>else distance=delta_y;

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* вычерчивание линии
*/

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (t=0;
t&lt;=distance+1; t++) 

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(startx,starty,color);

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xerr+=delta_x;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>yerr+=delta_y;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (xerr&gt;distance) 

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xerr-=distance;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>startx+=incx;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (yerr&gt;distance) 

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>yerr-=distance;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>starty+=incy;

<!--<br><br><a href="#top">наверх</a>-->
<p><div align="center"><b><font size="+1"><i><a name="4-5">Изображение и закрашивание прямоугольников  </a></i></font></b></div></p>

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Если
у вас есть функции вычерчивания линий, то не составит особого труда создать
функции вычерчивания прямоугольников. Пример, приведенный здесь, вычерчивает
прямоугольники в заданном цвете путем задания координат двух противоположных
углов.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/*<span
style="mso-spacerun: yes">  </span>Вычерчивание прямоугольника<span
style="mso-spacerun: yes">  </span>*/

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
box(startx,starty,endx,endy,color_code)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
startx,starty,endx,endy,color_code;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:60.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(startx,starty,endx,starty,color_code);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:60.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(startx,starty,startx,endy,color_code);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:60.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(startx,endy,endx,endy,color_code);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:60.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(endx,starty,endx,endy,color_code);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Для
того, чтобы закрасить прямоугольник, требуется выполнить запись в каждую точку
растра внутри прямоугольника. Программа fill_box(), приведенная ниже,
закрашивает прямоугольник, определенный координатами двух противоположных
углов, заданным цветом. В ней используется функция line(), задающая цвет внутри
прямоугольника.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Закрашивание
прямоугольника в заданный цвет */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
fill_box(startx,starty,endx,endy,color_code)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
startx,starty,endx,endy,color_code;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>register int i,begin,end;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:60.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>begin=startx&lt;endx ?
startx:endx;

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>end=startx&gt;endx ? startx:endx;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:60.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(i=begin;i&lt;=end;++i)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(i,starty,i,endy,color_code);

<!--<br><br><a href="#top">наверх</a>-->
<p><div align="center"><b><font size="+1"><i><a name="4-6">Вычерчивание окружностей </a></i></font></b></div></p>


<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Самым
быстрым и легким способом вычерчивания окружностей является способ, основанный
на использовании опять таки алгоритма Брезенхама, похожего на одноименный
алгоритм вычерчивания линий. Данный метод также не требует вычислений чисел с
плавающей точкой, кроме вычисления коэффициента сжатия, поэтому он обеспечивает
достаточное быстродействие. По существу, алгоритм основан на приращении
координат X и Y на величину погрешности между ними. Значение погрешности
содержится в переменой delta. Функция plot_circle() выполняет запись точек по
окружности. Переменная asp_ratio является глобальной, т.к. она используется как
в функции circle(), так и в функции plot_circle(). Эта переменная может быть
полезна с точки зрения возможности установления ее значения вне функции
circle() и дальнейшего использования внутри функции. Путем изменения значения
этой переменной вы можете рисовать эллипсы. Параметрами функции circle()
является центр окружности, ее радиус и цвет. Тексты функций приведены ниже.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
11.1pt;margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:10.0pt'>double asp_ratio;

<p class=MsoNormal align=center style='margin-right:4.4pt;text-align:center;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>/* Вычерчивание окружности с использованием алгоритма

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:60.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>Брезенхама */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
circle(x_center,y_center,radius,color_code)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
x_center,y_center,radius,color_code;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>register x,y,delta;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>asp_ratio=1.0; /* это
число может меняется в различных

<p class=MsoNormal align=center style='margin-right:4.4pt;text-align:center;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>случаях */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:71.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y=radius;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:71.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta=3-2*radius;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:71.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (x=0;x&lt;y; ) 

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:93.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>plot_circle(x,y,x_center,y_center,color_code);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:93.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (delta&lt;0)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:110.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta+=4*x+6;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:93.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else 

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:110.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta+=4*(x-y)+10;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:110.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y--;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:93.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:93.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x++;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:71.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x=y;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (y)
plot_circle(x,y,x_center,y_center,color_code);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal align=center style='margin-right:4.4pt;text-align:center;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>/* Функция печатает точки, определяющие окружность */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:60.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
plot_circle(x,y,x_center,y_center,color_code)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:60.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
x,y,x_center,y_center,color_code;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:60.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
startx,starty,endx,endy,x1,y1;

<p class=MsoNormal style='0cm;margin-right:4.4pt;22.2pt;
margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>starty=y*asp_ratio; 

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>endy=(y+1)*asp_ratio;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>startx=x*asp_ratio;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>endx=(x+1)*asp_ratio;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(x1=startx;x1&lt;endx;++x1) 

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x1+x_center,y+y_center,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x1+x_center,y_center-y,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x_center-x1,y+y_center,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x_center-x1,y_center-y,color_code);

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(y1=starty;y1&lt;endy;++y1) 

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(y1+x_center,x+y_center,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(y1+x_center,y_center-x,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x_center-y1,x+y_center,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x_center-y1,y_center-x,color_code);

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:60.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Закрашивать
окружность можно путем повторного вызова функции circle() с заданием все более
и более меньшего радиуса. Этот способ используется в функции fill_circle(),
текст которой приведен ниже.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Закрашивание
окружности путем повторного вызова

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>circle() с уменьшением радиуса */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
fill_circle(x,y,r,c)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x,y,r,c;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>while (r) 

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:99.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>circle(x,y,r,c);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:99.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r--;

<!--<br><br><a href="#top">наверх</a>-->
<p><div align="center"><b><font size="+1"><i><a name="4-7">Простейшая тестовая программа </a></i></font></b></div></p>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Приведенные здесь программа иллюстрируют применение и
возможности ранее описанных функций поддержки графики.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Программа,
иллюстрирующая работу графических

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:60.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>функций */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>#include
&quot;dos.h&quot;

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>#include &quot;stdio.h&quot;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
mode(),line(),box(),fill_box();

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
mempoint(),palette(),xhairs();

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>void circle(),plot_circle(),fill_circle();

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>double asp_ratio;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>main()

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mode(4);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>palette(0);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(0,0,100,100,1);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>box(50,50,80,90,2);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>fill_box(100,0,120,40,3);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>circle(100,160,30,2);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>fill_circle(150,250,20,1);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>getchar();

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mode(2);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>/* установка палитры */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void palette(pnum)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int pnum;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>union REGS r;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.bh=1; /* код 4
режима графики */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.bl=pnum; /* номер
палитры */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.ah=11; /*
устанавливаетса для вызова палитры */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int86(0x10,&amp;r,&amp;r);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Установка
видеорежима */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void mode(mode_code)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int mode_code;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>union REGS r;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.al = mode_code;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.ah = 0;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int86(0x10,&amp;r,&amp;r);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/*<span
style="mso-spacerun: yes">  </span>Вычерчивание прямоугольника<span
style="mso-spacerun: yes">  </span>*/

<p class=MsoNormal style='0cm;margin-right:4.4pt;22.2pt;
margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>void
box(startx,starty,endx,endy,color_code) 

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
startx,starty,endx,endy,color_code;

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(startx,starty,endx,starty,color_code);

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(startx,starty,startx,endy,color_code);

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(startx,endy,endx,endy,color_code);

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(endx,starty,endx,endy,color_code);

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:33.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Вычерчивание линии
заданного цвета с использованием

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>алгоритма Брезенхама
*/

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
line(startx,starty,endx,endy,color)

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
startx,starty,endx,endy,color;

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>register int
t,distance;

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
xerr=0,yerr=0,delta_x,delta_y;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>int incx,incy;

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;tab-stops:362.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>/*
Вычисление расстояния в обоих направлениях<span style='mso-tab-count:1'>                                                     </span>*/

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta_x=endx-startx;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>delta_y=endy-starty;

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Определение
направления шага,

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>шаг вычисляется либо
по вертикальной, либо по горизонтальной

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;tab-stops:199.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>линии<span
style='mso-tab-count:1'>                                                     </span>*/

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (delta_x&gt;0)
incx=1;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else<span
style="mso-spacerun: yes">  </span>if (delta_x==0) incx=0;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>else<span style="mso-spacerun: yes"> 
</span>incx= -1;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (delta_y&gt;0)
incy=1;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else<span
style="mso-spacerun: yes">  </span>if (delta_y==0) incy=0;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>else<span style="mso-spacerun: yes"> 
</span>incy= -1;

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Определение какое
расстояние больше */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta_x=abs(delta_x);

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta_y=abs(delta_y);

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if
(delta_x&gt;delta_y) distance=delta_x;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>else distance=delta_y;

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Вычерчивание линии
*/

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (t=0;
t&lt;=distance+1; t++) 

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(startx,starty,color);

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xerr+=delta_x;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>yerr+=delta_y;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (xerr&gt;distance) 

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xerr-=distance;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>startx+=incx;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (yerr&gt;distance) 

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>yerr-=distance;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>starty+=incy;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>/* Закрашивание прямоугольника<span
style="mso-spacerun: yes">  </span>заданным цветом */

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
fill_box(startx,starty,endx,endy,color_code)

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
startx,starty,endx,endy,color_code;

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>register int i,begin,end;

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>begin=startx&lt;endx ?
startx:endx;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>end=startx&gt;endx ? startx:endx;

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(i=begin;i&lt;=end;++i)

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(i,starty,i,endy,color_code);

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Вычерчивание
окружности с использованием алгоритма

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>Брезенхама */

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
circle(x_center,y_center,radius,color_code)

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
x_center,y_center,radius,color_code;

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>register x,y,delta;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>asp_ratio=1.0; /* это
число может меняется в различных

<p class=MsoNormal align=center style='text-align:center;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>случаях
*/

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y=radius;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta=3-2*radius;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (x=0;x&lt;y; ) 

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>plot_circle(x,y,x_center,y_center,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (delta&lt;0)

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta+=4*x+6;

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else 

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta+=4*(x-y)+10;

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y--;

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x++;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x=y;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (y)
plot_circle(x,y,x_center,y_center,color_code);

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Функция изображает
точки, определяющие окружность */

<p class=MsoNormal align=center style='text-align:center;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>void
plot_circle(x,y,x_center,y_center,color_code)

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
x,y,x_center,y_center,color_code;

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
startx,starty,endx,endy,x1,y1;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>starty=y*asp_ratio;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>endy=(y+1)*asp_ratio;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>startx=x*asp_ratio;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>endx=(x+1)*asp_ratio;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(x1=startx;x1&lt;endx;++x1) 

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x1+x_center,y+y_center,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x1+x_center,y_center-y,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x_center-x1,y+y_center,color_code);

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>mempoint(x_center-x1,y_center-y,color_code);

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(y1=starty;y1&lt;endy;++y1) 

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(y1+x_center,x+y_center,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(y1+x_center,y_center-x,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x_center-y1,x+y_center,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x_center-y1,y_center-x,color_code);

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Закрашивание
окружности путем повторного вызова

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>circle() с уменьшением
радиуса */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
fill_circle(x,y,r,c)

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x,y,r,c;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>while (r) 

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>circle(x,y,r,c);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r--;

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Запись точки в
CGA/EGA */

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
mempoint(x,y,color_code)

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x,y,color_code;

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>union mask 

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char c[2];

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int i;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>bit_mask;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
i,index,bit_position;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>unsigned char t;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char xor; /*
&quot;исключающее ИЛИ&quot; цвета в случае его

<p class=MsoNormal style='margin-left:143.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>изменения */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char far *ptr=(char
far *) 0xB8000000; /* точка в памяти

<p class=MsoNormal style='margin-left:66.0pt;text-indent:231.0pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>CGA */ bit_mask.i=0xFF3F;<span style="mso-spacerun:
yes">                 </span>/* 11111111 00111111 в

<p class=MsoNormal style='margin-left:275.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>двоичном виде */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (x&lt;0 || x&gt;199
|| y&lt;0 || y&gt;319) return;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;tab-stops:228.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>xor=color_code
&amp; 128;<span style='mso-tab-count:1'>                                </span>/*
проверка, устанавливался ли

<p class=MsoNormal style='margin-left:66.0pt;text-indent:165.0pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>режим &quot;исключающего ИЛИ&quot; */ color_code=color_code &amp;
127;<span style="mso-spacerun: yes">     </span>/* маска старших битов */

<p class=MsoNormal align=center style='11.1pt;text-align:center;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>/*<span style="mso-spacerun: yes">  </span>Установка
маски битов и битов режима цвета

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>в правую позицию */

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>bit_position=y%4; /*
вычисление нужной позиции в байте */

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>color_code&lt;&lt;=2*(3-bit_position);
/* сдвиг кода цвета

<p class=MsoNormal style='margin-left:71.5pt;text-indent:148.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>в нужную позицию */ bit_mask.i&gt;&gt;=2*bit_position; /* сдвиг битовой
маски в

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:231.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>нужную позицию */

<p class=MsoNormal style='0cm;margin-right:0cm;33.3pt;
margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>/* определение требуемого байта в памяти
терминала */ 

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>index=x*40+(y%4);

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (x%2) index+=8152;
/* если нечетный, используется

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:214.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>второй блок */

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Запись цвета */

<p class=MsoNormal align=center style='text-align:center;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>if
(!xor)<span style="mso-spacerun: yes">   </span>/* режим изменения цвета */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>t=*(ptr+index) &amp;
bit_mask.c[0];

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*(ptr+index)=t|color_code;

<p class=MsoNormal align=center style='text-align:center;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else 

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>t=*(ptr+index) |
(char)0;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*(ptr+index)=t &amp;
color_code;

<!--<br><br><a href="#top">наверх</a>-->
<p><div align="center"><b><font size="+1"><i><a name="4-8">Сохранение и загрузка графических изображений </a></i></font></b></div></p>

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Сохранение
и загрузка графических изображений является довольно простым делом, т.к. образ
изображений находится в видеопамяти дисплея, а ее содержимое легко копировать
на дисковый файл. Главной проблемой является необходимость введения
пользователем имени файла, ввиду того, что запрос о вводе и введенное имя файла
сотрут часть информации на экране. Для того, чтобы избежать этого, разработаны
функции save_pic() и load_pic(), тексты которых приводятся в данном разделе.
Первая функция сохраняет 14 верхних строк изображения, чистит эту область,
запрашивает имя файла и, после того, как оно будет введено, восстанавливает
изображение.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* сохранение<span
style="mso-spacerun: yes">  </span>графического изображения */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void save_pic()

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char fname[80];

<p class=MsoNormal style='0cm;margin-right:193.6pt;
0cm;margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>FILE *fp; register int
i,j;

<p class=MsoNormal style='0cm;margin-right:22.0pt;
0cm;margin-left:269.5pt;.0001pt;text-indent:-214.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>char far *ptr=(char far *) 0xB8000000; /* точка в памяти<span
style="mso-spacerun: yes">   </span>CGA<span style="mso-spacerun: yes"> 
</span>*/

<p class=MsoNormal style='0cm;margin-right:22.0pt;
0cm;margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char far *temp;

<p class=MsoNormal style='0cm;margin-right:22.0pt;
11.1pt;margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:10.0pt'>unsigned char buf[14][80];
/* содержит образ экрана */

<p class=MsoNormal style='0cm;margin-right:22.0pt;
0cm;margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>temp=ptr;

<p class=MsoNormal style='0cm;margin-right:22.0pt;
0cm;margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* сохранение верхних
строк текущего содержимого экрана */

<p class=MsoNormal style='0cm;margin-right:22.0pt;
0cm;margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (i=0;i&lt;14;++i)

<p class=MsoNormal style='0cm;margin-right:22.0pt;
0cm;margin-left:71.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (j=0;j&lt;80;++j) 

<p class=MsoNormal align=center style='margin-right:22.0pt;text-align:center;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>buf[i][j]=*temp; /* четный байт */

<p class=MsoNormal style='0cm;margin-right:22.0pt;
0cm;margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>buf[i][j+1]=*(temp+8152);
/* нечетный байт */

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*temp=0;
*(temp+8152)=0; /* чистка позиций экрана */

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>temp++;

<p class=MsoNormal style='0cm;margin-right:22.0pt;
0cm;margin-left:71.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>goto_xy(0,0);

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>printf(&quot;Имя
файла:&quot;);

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>gets(fname);

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if
(!(fp=fopen(fname,&quot;wb&quot;))) 

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>printf(&quot;Фвайл не
может быть открыт\n&quot;);

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>return;

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>temp=ptr;

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* восстановление
содержимого экрана */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (i=0;i&lt;14;++i)

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (j=0;j&lt;80;++j) 

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*temp= buf[i][j]; /*
четный байт */

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*(temp+8125)=buf[i][j+1];
/* нечетный байт */

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*temp=0;
*(temp+8152)=0; /* чистка позиций экрана */

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>temp++;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>/* копирование изображения в файл<span
style="mso-spacerun: yes">  </span>*/ 

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(i=0;i&lt;8152;i++) 

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>putc(*ptr,fp); /*
четный байт */

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>putc(*(ptr+8125),fp);
/* нечетный байт */

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>ptr++;

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>fclose(fp);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* загрузка
изображения */

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void load_pic()

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char fname[80];

<p class=MsoNormal style='0cm;margin-right:184.8pt;
0cm;margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>FILE *fp; register int
i,j;

<p class=MsoNormal style='11.1pt;margin-right:13.2pt;
0cm;margin-left:280.5pt;.0001pt;text-indent:-214.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>char far *ptr=(char far *) 0xB8000000; /* точка в памяти<span
style="mso-spacerun: yes">   </span>CGA<span style="mso-spacerun: yes"> 
</span>*/

<p class=MsoNormal style='0cm;margin-right:13.2pt;
0cm;margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char far *temp;

<p class=MsoNormal style='0cm;margin-right:13.2pt;
11.1pt;margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:10.0pt'>unsigned char buf[14][80];
/* содержит образ экрана */

<p class=MsoNormal style='0cm;margin-right:13.2pt;
0cm;margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>temp=ptr;

<p class=MsoNormal style='0cm;margin-right:13.2pt;
0cm;margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* сохранение верхних
строк текущего содержимого экрана */

<p class=MsoNormal style='0cm;margin-right:13.2pt;
0cm;margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (i=0;i&lt;14;++i)

<p class=MsoNormal style='0cm;margin-right:13.2pt;
0cm;margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (j=0;j&lt;80;j+=2)


<p class=MsoNormal style='0cm;margin-right:13.2pt;
0cm;margin-left:99.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>buf[i][j]=*temp;

<p class=MsoNormal style='0cm;margin-right:13.2pt;
0cm;margin-left:99.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>buf[i][j+1]=*(temp+8152);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*temp=0;
*(temp+8152)=0; /* чистка позиций экрана */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>temp++;

<p class=MsoNormal style='0cm;margin-right:13.2pt;
0cm;margin-left:82.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>goto_xy(0,0);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>printf(&quot;Имя
файла:&quot;);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>gets(fname);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if
(!(fp=fopen(fname,&quot;rb&quot;))) 

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>goto_xy(0,0);

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>printf(&quot;Файл не
может быть открыт\n&quot;);

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>temp=ptr;

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* восстановление
содержимого экрана */

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (i=0;i&lt;14;++i)

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (j=0;j&lt;80;j+=2)


<p class=MsoNormal style='margin-left:115.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*temp= buf[i][j];

<p class=MsoNormal style='margin-left:115.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*(temp+8125)=buf[i][j+1];

<p class=MsoNormal style='margin-left:115.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>temp++;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>return;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:33.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* загрузка
изображения из файла */

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(i=0;i&lt;8152;i++) 

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*ptr=getc(fp); /*
четный байт */

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*(ptr+8125)=getc(fp);
/* нечетный байт */

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>ptr++;

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>fclose(fp); 


<p class=MsoNormal style='0cm;margin-right:4.4pt;510.6pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Подпрограммы
начинают обработку видеопамяти, начиная с адреса, содержащегося в указателе
temp считывая или записывая каждый четный и нечетный байты в порядке
возрастания их адресов. Такой подход позволяет добиться простоты и наглядности
функционирования рассмотренных выше подпрограмм. В случае обработки видеопамяти
в порядке возрастания адресов, вначале будет отображаться четная точка растра,
а затем - нечетная. 

<!--<br><br><a href="#top">наверх</a>-->
<p><div align="center"><b><font size="+1"><i><a name="4-9">Дублирование части экрана </a></i></font></b></div></p>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Иногда бывает полезным скопировать часть экрана в
другую область. Это легко выполнить используя функцию copy(), текст которой
приводится ниже.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* копирование части
экрана в другую область */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
copy(startx,starty,endx,endy,x,y)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;tab-stops:199.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>int
startx,starty;<span style='mso-tab-count:1'>                                    </span>/*
верхняя левая координата */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;tab-stops:199.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>int
endx,endy;<span style='mso-tab-count:1'>                                       </span>/*
нижняя правая координата области

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:203.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>копирования */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;tab-stops:139.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>int
x,y;<span style='mso-tab-count:1'>                         </span>/* верхняя
левая координата области,

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:148.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>куда будет проводится
копирование */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:71.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int i,j;

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>unsigned char c;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:71.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(;startx&lt;endx;startx++,x++)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(i=starty,j=y;i&lt;endy;i++,j++) 

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:104.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>c=read_point(startx,i);
/* чтение точки */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:104.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x,j,c); /*
запись ее в новую область */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Как вы могли убедиться, при обращении к функциим в
качестве ее аргументов указываются верхняя левая и нижняя правая координаты
углов области, которая будет копироваться, и верхняя левая координаты, куда
делается копия.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
22.2pt;margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>Вы также можете убедится, что с небольшими изменениями функцию copy()
можно преобразовать в функцию move(). Функция move() пересылает указанную
область в другую и чистит исходное место. Текст функции приводится ниже. 

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:38.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Пересылка части
экрана в другую область */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
move(startx,starty,endx,endy,x,y)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int startx,starty; /*
верхняя левая координата */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int endx,endy; /*
нижняя правая координата области

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:154.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>пересылки */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x,y; /* верхняя
левая координата области,

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:115.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>куда будет проводится
пересылка */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:71.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int i,j;

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>unsigned char c;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:71.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(;startx&lt;endx;startx++,x++)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(i=starty;j=y;i&lt;endy;i++,j++) 

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:104.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>c=read_point(startx,i);
/* чтение точки */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:104.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(startx,i,0);
/* стирание старого

<p class=MsoNormal style='0cm;margin-right:4.4pt;22.2pt;
margin-left:242.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>изображения */ 

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x,j,c); /*
запись точки в новую область */ 

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<!--<br><br><a href="#top">наверх</a>-->
<p><div align="center"><b><font size="+1"><i><a name="4-10">Вращение точки в плоскости экрана </a></i></font></b></div></p>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Вращение точки в плоскости экрана (двумерном
пространстве) представляет собой довольно простую задачу в декартовой системе
координат. Вы можете вспомнить из курса аналитической геометрии, что вращение
точки вокруг центра на угол theta, описывается формулой:

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>new_x = old_x *
cos(theta) - old_y * sin(theta)

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>new_y = old_x * sin(theta) - old_y *
cos(theta)

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Единственной
сложностью при употреблении этих формул для графических дисплеев будет являтся
тот факт, что экран дисплея не является декартовым пространством. Декартовы оси
определяют 4 квадранта, как это показано на рисунке 4-2. Однако экран терминала
представляет собой один из квадрантов, оси X и Y в котором перевернуты. Для
решения этой проблемы необходимо определить новый центр и привести в
соответствие координаты X и Y экрана и координаты осей декартова пространства.
Любая точка на экране может быть использована в качестве центра, но обычно
центр определяется как можно ближе к центру объекта, который мы собираемся
вращать. Функция rotate_point(), приведенная ниже, вычисляет величину новых
значений X и Y для заданного угла вращения.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Вращение точки
вокруг центра с координатами

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:60.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x_org и y_org на угол
theta */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
rotate_point(theta,x,y,x_org,y_org)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>double theta,*x,*y;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x_org,y_org;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>double tx,ty;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* нормализация X и Y
к начальному адресу */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:71.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>tx=*x-x_org;

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>ty=*y-y_org;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* вращение */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*x=tx*cos(theta)-ty*sin(theta);

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>*y=tx*sin(theta)-ty*cos(theta);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* возвращение
значений координат */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*x+=x_org;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*y+=y_org;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='0cm;margin-right:4.4pt;33.3pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Заметим,
что rotate_point() изменяет параметры X и Y путем присвоения им требуемого
значение для получения угла вращения, заданного переменной theta. Угол вращения
задается в радианах. 

<table border=0 cellspacing=0 cellpadding=0 style='margin-left:29.5pt;
 border-collapse:collapse;mso-padding-alt:0cm 2.0pt 0cm 2.0pt'>
 <tr>
  <td width=507 valign=top style='width:380.5pt;border:solid windowtext .75pt;
  padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='11.1pt;margin-right:0cm;
  0cm;margin-left:11.0pt;.0001pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>Декартова система координат Y
  <p class=MsoNormal style='margin-left:198.0pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>II ^ I
  <p class=MsoNormal style='margin-left:203.5pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>+,- | +,+
  <p class=MsoNormal style='margin-left:247.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>|
  <p class=MsoNormal style='margin-left:247.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>|0.0
  <p class=MsoNormal style='margin-left:198.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>-------------------
  X
  <p class=MsoNormal style='margin-left:247.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>|
  <p class=MsoNormal style='margin-left:203.5pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>-,- | -,+
  <p class=MsoNormal style='margin-left:247.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>|
  <p class=MsoNormal style='margin-left:192.5pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>III ј IV
  <p class=MsoNormal style='22.2pt;margin-right:30.8pt;
  0cm;margin-left:11.0pt;.0001pt;text-align:justify;text-indent:
  275.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:10.0pt'>0.0 Графический экран ----------- Y
  <p class=MsoNormal style='margin-left:247.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>|
  <p class=MsoNormal style='margin-left:247.5pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>| +,+
  <p class=MsoNormal style='margin-left:247.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>|
  <p class=MsoNormal style='margin-left:247.5pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>ј
  <p class=MsoNormal style='0cm;margin-right:0cm;5.55pt;
  margin-left:247.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
  none'><span style='font-size:10.0pt'>X
  </td>
 </tr>
</table>

<p class=MsoNormal style='11.1pt;margin-right:0cm;
355.2pt;margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:10.0pt'>Рис. 4-2. Декартовы
координаты на графическом экране. 

<!--<br><br><a href="#top">наверх</a>-->
<p><div align="center"><b><font size="+1"><i><a name="4-11">Вращение обьекта </a></i></font></b></div></p>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Хотя функция rotate_point(), вычисляющая требуемые
значения координат X и Y при вращении точки, уже была нами рассмотрена. Однако,
она не может быть использована для вращения (поворотов) объектов. Для этого
необходима другая функция. Под объектом здесь и далее будем понимать набор
сегментов прямых отрезков. Координаты крайних точек каждого отрезка содержатся
в двумерном массиве чисел с плавающей точкой. Каждая строка массива содержит
начальные и конечные координаты данного отрезка. Это означает, что первая
размерность массива представляет собой количество отрезков, входящих в состав
объекта, а вторая размерность будет равна 4 (число координат крайних точек
отрезка). Например, массив, приведенный ниже

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
11.1pt;margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:10.0pt'>double object [10][4];

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>определяет объект, состоящий из 10
отрезков.

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Как
правило, массив организуется так, как показано на рисунке 4-3.

<table border=0 cellspacing=0 cellpadding=0 style='margin-left:29.5pt;
 border-collapse:collapse;mso-padding-alt:0cm 2.0pt 0cm 2.0pt'>
 <tr>
  <td width=515 valign=top style='width:386.5pt;border:solid windowtext .75pt;
  padding:0cm 2.0pt 0cm 2.0pt'>
  <p class=MsoNormal style='11.1pt;margin-right:0cm;
  0cm;margin-left:11.0pt;.0001pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>Первый Второй --------&gt;
  <p class=MsoNormal style='margin-left:11.0pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>индекс индекс
  <p class=MsoNormal style='11.1pt;margin-right:0cm;
  0cm;margin-left:22.0pt;.0001pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>| 0 1 2 3
  <p class=MsoNormal style='margin-left:22.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>|
  <p class=MsoNormal style='margin-left:22.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>|
  <p class=MsoNormal style='margin-left:22.0pt;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>V
  <p class=MsoNormal style='11.1pt;margin-right:0cm;
  0cm;margin-left:22.0pt;.0001pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>0 start_X1 start_Y1 end_X1 end_Y1
  <p class=MsoNormal style='11.1pt;margin-right:0cm;
  0cm;margin-left:22.0pt;.0001pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>1 start_X2 start_Y2 end_X2 end_Y2
  <p class=MsoNormal style='11.1pt;margin-right:0cm;
  0cm;margin-left:22.0pt;.0001pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>2 start_X3 start_Y3 end_X3 end_Y3
  <p class=MsoNormal style='11.1pt;margin-right:17.6pt;
  0cm;margin-left:22.0pt;.0001pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>3 start_X4 start_Y4 end_X4 end_Y4 . .
  <p class=MsoNormal style='margin-left:22.0pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>. .
  <p class=MsoNormal style='margin-left:22.0pt;text-align:justify;mso-hyphenate:
  none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
  10.0pt'>. .
  <p class=MsoNormal style='0cm;margin-right:0cm;5.55pt;
  margin-left:22.0pt;text-align:justify;mso-hyphenate:none;mso-layout-grid-align:
  none;text-autospace:none'><span style='font-size:10.0pt'>n start_Xn start_Yn
  end_Xn end_Yn
  </td>
 </tr>
</table>

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
22.2pt;margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:10.0pt'>Рис. 4-3. Условная
организация массива. 

<p class=MsoNormal style='0cm;margin-right:4.4pt;22.2pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>Определить
объект - это значит разместить в массиве координаты начальных и конечных точек
отрезков, составляющих объект. Например, если объект представляет собой
прямоугольник вида: 

<p class=MsoNormal style='margin-left:137.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>0.0-------------------0.10

<p class=MsoNormal style='margin-left:154.0pt;mso-hyphenate:none;tab-stops:
262.0pt;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>|<span style='mso-tab-count:1'>                                               </span>|

<p class=MsoNormal style='margin-left:154.0pt;mso-hyphenate:none;tab-stops:
262.0pt;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>|<span style='mso-tab-count:1'>                                               </span>|

<p class=MsoNormal style='margin-left:154.0pt;mso-hyphenate:none;tab-stops:
262.0pt;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>|<span style='mso-tab-count:1'>                                               </span>|

<p class=MsoNormal style='margin-left:154.0pt;mso-hyphenate:none;tab-stops:
262.0pt;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>|<span style='mso-tab-count:1'>                                               </span>|

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:132.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>10.0-------------------10.10

<p class=MsoNormal style='margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>то в<span
style="mso-spacerun: yes">  </span>массив,<span style="mso-spacerun: yes"> 
</span>определяющий<span style="mso-spacerun: yes">   </span>данный<span
style="mso-spacerun: yes">   </span>прямоугольник,<span style="mso-spacerun:
yes">   </span>заносятся

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>следующие числа:

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>object[0][0] = 0;
object[0][1] = 0;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>object[0][0] = 0; object[0][3] = 10;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>object[1][0] = 0;
object[1][1] = 10;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>object[1][0] = 10; object[1][3] = 10;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>object[2][0] = 10;
object[2][1] = 10;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>object[2][0] = 10; object[2][3] = 0;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>object[3][0] = 10;
object[3][1] = 0;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>object[3][0] = 0; object[3][3] = 0;

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>После
того, как объект определен, вы можете вращать его, используя функцию
rotate_object(), приведенную ниже, по часовой стрелке (клавиша &lt;R&gt;) или в
противоположную сторону (клавиша &lt;L&gt;).

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
11.1pt;margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:10.0pt'>/* Вращение заданных
объектов */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void rotate_object(ob,
theta, x, y, sides)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>double ob[][4]; /*
описание объекта */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>double theta;<span
style="mso-spacerun: yes">   </span>/* угол поворота в радианах */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x, y;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int sides;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>register int i, j;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>double tempx, tempy;

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>char ch;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for(;;)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>ch = getch(); /* ввод
признака направления вращения */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>switch(tolower(ch))

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'l': /* вращение
против часовой стрелки */

<p class=MsoNormal align=center style='margin-right:4.4pt;text-align:center;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>theta = theta &lt; 0 ? -theta : theta;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:99.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'r': /* вращение
по часовой стрелке<span style="mso-spacerun: yes">  </span>*/

<p class=MsoNormal align=center style='margin-right:4.4pt;text-align:center;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>theta = theta &gt; 0 ? -theta : theta;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:99.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>default: return;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:88.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;22.2pt;
margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>for(j=0; j&lt;=sides; j++) /* стирание
старых линий<span style="mso-spacerun: yes">  </span>*/ 

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line((int) ob[j][0],
(int) ob[j][1],

<p class=MsoNormal style='margin-left:88.0pt;text-indent:27.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>(int) ob[j][2], (int) ob[j][3], 0); rotate_point(theta, &amp;ob[j][0],

<p class=MsoNormal style='margin-left:159.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>&amp;ob[j][1], x, y);

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>rotate_point(theta,
&amp;ob[j][2], &amp;ob[j][3], x, y);

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line((int) ob[j][0],
(int) ob[j][1],

<p class=MsoNormal style='margin-left:115.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>(int) ob[j][2], (int)
ob[j][3], 2);

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Как показано в описании параметров функции
rotate_object(), вращение осуществляется вокруг центра, заданного координатами
X и Y, на угол, величина которого задана параметром theta в радианах.
Минимальное значение параметра theta равно 0.01 радиан. Заметим, что объект
сначала стирается из старой области размещения, а затем перерисовывается вновь.
Если это условие не может быть выполнено, то экран окрашивается в голубой цвет.
Необходимым условием выполнения программы rotate_object() является обязательное
задание параметра sides.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;text-align:justify;text-indent:
27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Приведенная ниже функция display_object() не имеет
отношения к вращению объектов, но она может быть полезна при работе с
объектами. Она рисует на экране объекты, определенные в массиве ob.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* отображение объекта
на экране */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
display_object(ob, sides)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>double ob[][4];

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int sides;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>register int i;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for(i=0; i&lt;sides;
i++)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line((int)ob[i][0],
(int)ob[i][1],

<p class=MsoNormal align=center style='margin-right:4.4pt;text-align:center;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>(int)ob[i][2], (int)ob[i][3], 2);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>В
качестве иллюстрации удобства использования функций вращения объектов ниже
приводятся программы вращения изображения дома. На рисунке 4-4 показано
изображение на экране терминала дома при различных углах поворота вокруг
собственного центра. Прямоугольник, обрамляющий изображение вращаемого дома,
поможет вам правильно оценить масштаб и перспективу.

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>_________________________________________________________________

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:110.0pt;.0001pt;text-indent:-66.0pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>Прим. пер.<span style="mso-spacerun: yes">  </span>Рисунок 4-4 не может
быть воспроизведен имеющимися средствами.

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>_________________________________________________________________

<p class=MsoNormal style='0cm;margin-right:4.4pt;33.3pt;
margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>Рис. 4-4. Вращение объекта. 

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Пример<span
style="mso-spacerun: yes">  </span>вращения<span style="mso-spacerun: yes"> 
</span>изображения<span style="mso-spacerun: yes">  </span>объекта<span
style="mso-spacerun: yes">  </span>с<span style="mso-spacerun: yes"> 
</span>использованием

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>адаптера CGA/EGA в 4
графическом режиме

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>*/

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>#include
&quot;dos.h&quot;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>#include
&quot;stdio.h&quot;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>#include &quot;math.h&quot;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void mode(), line(),
mempoint(), palette();

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>void rotate_point(), rotate_object(),
display_object();

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* массив house
определяет изображение дома */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>double house[][4] =

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;tab-stops:212.5pt 296.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>/*<span
style="mso-spacerun: yes">  </span>startx,<span style="mso-spacerun: yes">  
</span>starty,<span style='mso-tab-count:1'>                                               </span>endx,<span
style='mso-tab-count:1'>                            </span>endy<span
style="mso-spacerun: yes">  </span>*/

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>120,<span
style='mso-tab-count:1'>                            </span>120,<span
style="mso-spacerun: yes">         </span>120,<span style='mso-tab-count:1'>                                                 </span>200,<span
style="mso-spacerun: yes">   </span>/* дом */

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>120,<span
style='mso-tab-count:1'>                            </span>200,<span
style="mso-spacerun: yes">          </span>80,<span style='mso-tab-count:1'>                                                  </span>200,

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>80,<span
style='mso-tab-count:1'>                              </span>120,<span
style="mso-spacerun: yes">          </span>80,<span style='mso-tab-count:1'>                                                  </span>200,

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>80,<span
style='mso-tab-count:1'>                              </span>120,<span
style="mso-spacerun: yes">         </span>120,<span style='mso-tab-count:1'>                                                 </span>120,

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>60,<span
style='mso-tab-count:1'>                              </span>160,<span
style="mso-spacerun: yes">          </span>80,<span style='mso-tab-count:1'>                                                  </span>120,<span
style="mso-spacerun: yes">   </span>/* крышa*/

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>60,<span
style='mso-tab-count:1'>                              </span>160,<span
style="mso-spacerun: yes">          </span>80,<span style='mso-tab-count:1'>                                                  </span>200,

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>120,<span
style='mso-tab-count:1'>                            </span>155,<span
style="mso-spacerun: yes">         </span>100,<span style='mso-tab-count:1'>                                                 </span>155,<span
style="mso-spacerun: yes">   </span>/* двери*/

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>100,<span
style='mso-tab-count:1'>                            </span>155,<span
style="mso-spacerun: yes">         </span>100,<span style='mso-tab-count:1'>                                                 </span>165,

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>100,<span
style='mso-tab-count:1'>                            </span>165,<span
style="mso-spacerun: yes">         </span>120,<span style='mso-tab-count:1'>                                                 </span>165,

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>90,<span
style='mso-tab-count:1'>                              </span>130,<span
style="mso-spacerun: yes">         </span>100,<span style='mso-tab-count:1'>                                                 </span>130,<span
style="mso-spacerun: yes">   </span>/* окна */

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>90,<span
style='mso-tab-count:1'>                              </span>130,<span
style="mso-spacerun: yes">          </span>90,<span style='mso-tab-count:1'>                                                  </span>140,

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>100,<span
style='mso-tab-count:1'>                            </span>130,<span
style="mso-spacerun: yes">         </span>100,<span style='mso-tab-count:1'>                                                 </span>140,

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>90,<span
style='mso-tab-count:1'>                              </span>140,<span
style="mso-spacerun: yes">         </span>100,<span style='mso-tab-count:1'>                                                 </span>140,

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>90,<span
style='mso-tab-count:1'>                              </span>180,<span
style="mso-spacerun: yes">         </span>100,<span style='mso-tab-count:1'>                                                 </span>180,

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>90,<span
style='mso-tab-count:1'>                              </span>180,<span
style="mso-spacerun: yes">          </span>90,<span style='mso-tab-count:1'>                                                  </span>190,

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;tab-stops:138.5pt 300.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>100,<span
style='mso-tab-count:1'>                            </span>180,<span
style="mso-spacerun: yes">         </span>100,<span style='mso-tab-count:1'>                                                 </span>190

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>main()

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>union k

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char c[2];

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int i;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes">  </span>key;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mode(4);<span
style="mso-spacerun: yes">    </span>/* режим<span style="mso-spacerun: yes">  
</span>= 4 */

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>palette(0); /* палитра = 0 */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* рисунок
рамки,обрамляющей дом */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line (30, 70, 30, 260,
2);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line (160, 70, 160,
260, 2);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line (30, 70, 160, 70,
2);

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>line (30, 260, 160, 260, 2);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>display_object(house,
17);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>getchar();

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>rotate_object(house,
0.025, 90, 160, 17);

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>mode(3); 

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Выбор палитры */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void palette(pnum)

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int pnum;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>union REGS r;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.bh = 1; /* код 4
графического режима */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.bl = pnum;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.ah = 11;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int86(0x10, &amp;r,
&amp;r);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Выбор режима */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void mode(mode_code)

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int mode_code;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>union REGS r;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.al = mode_code;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.ah = 0;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int86(0x10, &amp;r,
&amp;r);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Рисунок отрезка
прямой заданного цвета */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void line(start_x,
start_y, endx, endy, color)

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int start_x, start_y,
endx, endy, color;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>register int t,
distance;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x=0, y=0, delta_x,
delta_y;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>int incx, incy;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* вычисление
приращений по x и по y */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta_x =
endx-start_x;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>delta_y = endy-start_y;

<p class=MsoNormal align=center style='text-align:center;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>/*
вычисление признаков направлений отрезка */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(delta_x&gt;0)

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>incx=1;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(delta_x==0)

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>incx=0;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>incx= -1;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(delta_y&gt;0)

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>incy=1;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(delta_y==0)

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>incy=0;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>incy= -1;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta_x=abs(delta_x);

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>delta_y=abs(delta_y); 

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(delta_x&gt;delta_y)

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>distance=delta_x;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>distance=delta_y;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* рисунок отрезка */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for(t=0;
t&lt;=distance; t++)

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(start_x,
start_y, color);

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x+=delta_x;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y+=delta_y;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(x&gt;distance)

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x-=distance;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>start_x+=incx;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(y&gt;distance)

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y-=distance;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>start_y+=incy;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>/* запись точки в CGA/EGA */

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
mempoint(x,y,color_code)

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x,y,color_code;

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>union mask 

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char c[2];

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int i;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>bit_mask;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
i,index,bit_position;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>unsigned char t;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char xor; /*
&quot;НЕ-ИЛИ&quot; цвета в случае его

<p class=MsoNormal style='margin-left:143.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>изменения */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char far *ptr=(char
far *) 0xB8000000; /* точка в

<p class=MsoNormal style='margin-left:66.0pt;text-indent:209.0pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>памяти CGA */ bit_mask.i=0xFF3F; /* 11111111 00111111 в

<p class=MsoNormal style='margin-left:187.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>двоичном виде */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (x&lt;0 || x&gt;199
|| y&lt;0 || y&gt;319) return;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xor=color_code &amp;
128; /* проверка, устанавливался ли

<p class=MsoNormal style='margin-left:66.0pt;text-indent:137.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>режим &quot;НЕ-ИЛИ&quot; */ color_code=color_code &amp; 127; /* маска
старших битов */

<p class=MsoNormal align=center style='11.1pt;text-align:center;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>/*<span style="mso-spacerun: yes">  </span>установка
битовой маски и битов режима цвета

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>в правую позицию */

<p class=MsoNormal align=center style='text-align:center;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>bit_position=y%4;
/* вычисление нужной позиции

<p class=MsoNormal style='margin-left:71.5pt;text-indent:115.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>в байте */ color_code&lt;&lt;=2*(3-bit_position); /* сдвиг кода цвета

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:71.5pt;text-indent:148.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>в нужную позицию */
bit_mask.i&gt;&gt;=2*bit_position; /* сдвиг битовой маски в

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:231.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>нужную позицию */

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>/* определение требуемого байта в памяти
терминала */

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>index=x*40+(y%4);

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (x%2) index+=8152;
/* если нечетный, используется

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:214.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>второй блок */

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>/* запись цвета */

<p class=MsoNormal align=center style='text-align:center;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>if
(!xor)<span style="mso-spacerun: yes">   </span>/* режим изменения цвета */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>t=*(ptr+index) &amp;
bit_mask.c[0];

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*(ptr+index)=t|color_code;

<p class=MsoNormal align=center style='text-align:center;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else 

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>t=*(ptr+index) |
(char)0;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*(ptr+index)=t &amp;
color_code;

<p class=MsoNormal style='margin-left:82.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* вращение точки
вокруг центра с координатами

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>в x_org и y_org, на угол theta */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
rotate_point(theta,x,y,x_org,y_org)

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>double theta,*x,*y;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x_org,y_org;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>double tx,ty;

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* нормализация X и Y
к начальному адресу */

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>tx=*x-x_org;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>ty=*y-y_org;

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* вращение */

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*x=tx*cos(theta)-ty*sin(theta);

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>*y=tx*sin(theta)-ty*cos(theta);

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* возвращение
значений координат */

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*x+=x_org;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*y+=y_org;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>/* Вращение заданных объектов */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void rotate_object(ob,
theta, x, y, sides)

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>double ob[][4]; /*
описание объекта */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>double theta;<span
style="mso-spacerun: yes">   </span>/* угол поворота в радианах */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x, y;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int sides;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>register int i, j;

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>double tempx, tempy; 

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>char ch;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for(;;)

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>ch = getch(); /* ввод
признака направления вращения */

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>switch(tolower(ch))

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'l': /* вращение
против часовой стрелки */

<p class=MsoNormal align=center style='text-align:center;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>theta
= theta &lt; 0 ? -theta : theta;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'r': /* вращение
по часовой стрелке<span style="mso-spacerun: yes">  </span>*/

<p class=MsoNormal align=center style='text-align:center;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>theta
= theta &gt; 0 ? -theta : theta;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>default: return;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for(j=0; j&lt;=sides;
j++) /* стирание старых линий<span style="mso-spacerun: yes">  </span>*/

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line((int) ob[j][0],
(int) ob[j][1],

<p class=MsoNormal style='margin-left:88.0pt;text-indent:27.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>(int) ob[j][2], (int) ob[j][3], 0); rotate_point(theta, &amp;ob[j][0],

<p class=MsoNormal style='margin-left:159.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>&amp;ob[j][1], x, y);

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>rotate_point(theta,
&amp;ob[j][2], &amp;ob[j][3], x, y);

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line((int) ob[j][0],
(int) ob[j][1],

<p class=MsoNormal style='margin-left:115.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>(int) ob[j][2], (int)
ob[j][3], 2);

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>/* отображение объекта на экране */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
display_object(ob, sides)

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>double ob[][4];

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int sides;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>register int i;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for(i=0; i&lt;sides;
i++)

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line((int) ob[i][0],
(int) ob[i][1],

<p class=MsoNormal style='margin-left:104.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>(int) ob[i][2], (int)
ob[i][3], 2);

<!--<br><br><a href="#top">наверх</a>-->
<p><div align="center"><b><font size="+1"><i><a name="4-12">Сборка подпрограмм </a></i></font></b></div></p>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>В этом, последнем, параграфе, описывается простая
программа рисования, использующая подпрограммы графики. Программы рисования
часто используют &quot;мышь&quot;, позволяющую пользователю удобным способом
отображать линии на экране терминала. Однако, &quot;мышью&quot; комплектуются
пока не все компьютеры поэтому, описанная здесь &quot;программа-художник&quot;
ориентирована на операции с клавишами перемещения курсора.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;text-align:justify;text-indent:
27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>В &quot;рисующих&quot; программах вам необходимо
контролировать текущее положение координат X и Y (в графическом режиме текущие
координаты индицируются курсором не совсем обычной формы). Для простоты
дальнейшего изложения материала будем называть &quot;графический&quot; курсор
&quot;перекрестьем&quot;, принимая во внимание и тот факт, что в графическом
режиме его форма действительно напоминает крест. Функция xhairs() размещает
графический курсор в позиции, специфицированной значениями ее аргументов X и Y.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;text-align:justify;text-indent:
27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Напоминаем, что двоичный код цвета складывается по
схеме &quot;ИЛИ&quot; со 128 с целью установки 7 бита в 1. Это позволяет
функции mempoint() складывать по схеме &quot;исключающего ИЛИ&quot; двоичные
коды старого и нового цвета на экране вместо его изменения. Такая возможность
позволяет достичь двух важных моментов. Во-первых, графический курсор всегда
видим, т.к. всегда имеет цвет, отличный от окружающего. Во-вторых, значительно
упрощается процесс возврата точки растра, занимаемой курсором, в исходное
положение. Эта операция выполняется путем повторного обращения к этим точкам (напомним,
что последовательное выполнение двух операций по схеме &quot;исключающего
ИЛИ&quot; всегда приводит к первоначальному значению). Ниже приведен текст
функции отображения графического курсора.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:44.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* отображение
графического курсора */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void xhairs(x,y)

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x,y;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(x-4,y,x+3,y,1|128);

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>line(x,y+4,x,y-3,1|128);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:49.5pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Программа рисования, описанная в данном разделе,
позволит вам:

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>- рисовать линии;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>- рисовать
прямоугольники;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>- закрашивать
прямоугольники;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>- рисовать окружности;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>- закрашивать
окружности;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>- выбирать цвет;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>- выбирать палитру;

<p class=MsoNormal style='0cm;margin-right:4.4pt;22.2pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>- устанавливать скорость изменения
параметров; 

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>- сохранять
графические изображения;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>- загружать
графические изображения;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>- вращать объекты
вокруг любой точки;

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>- копировать и пересылать графические
изображения. 

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>Приведем ниже текст главной программы :

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>main()

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>union k

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char c[2];

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int i;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>key ;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x=10, y=10; /*
текущая позиция экрана */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int cc=2;<span
style="mso-spacerun: yes">   </span>/* текущий цвет */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int on_flag=1; /*
признак использования карандаша */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int pal_num=1; /*
номер палитры */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* конечная точка
определения линий,

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>прямоугольников,
окружностей */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int startx=0,
starty=0, endx=0, endy=0;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int first_point=1;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int inc=1; /* шаг
пересылки */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int sides=0; /*
количество сторон выбранного объекта */

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>int i;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mode(4); /*
переключатель режима CGA/EGA */

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>palette(0); /* палитра 0 */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xhairs(x, y); /*
указатель курсора */

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>do

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>key.i = bioskey(0);

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xhairs(x, y); /*
графический курсор */

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(!key.c[0])
switch(key.c[1])

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 75: /* влево */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x, y-inc, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y -= inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 77: /* вправо */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x, y+inc, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y += inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 72: /* вверх */

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x-inc, y, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x -= inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 80: /* вниз */

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x+inc, y, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x += inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>case 71: /* вверх и влево */ 


<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x-inc, y-inc, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x -= inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y -= inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 73: /* вверх и
вправо */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x-inc, y+inc, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x -= inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y += inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 79: /* вниз и
влево */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x+inc, y-inc, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x += inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y -= inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 81: /* вниз и
вправо */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x+inc, y+inc, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x += inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y += inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;tab-stops:334.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>case
59: /* F1 - медленно */<span style='mso-tab-count:1'>                                                           </span>inc=1;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 60: /* F2 -
быстро<span style="mso-spacerun: yes">   </span>*/

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>inc=5;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else
switch(tolower(key.c[0]))

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'o': /*
переключение шаблона */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>on_flag = !on_flag;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case '1': cc=1; /*
цвет 1 */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case '2': cc=2; /*
цвет 2 */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case '3': cc=3; /*
цвет 3 */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case '0': cc=0; /*
цвет 0 */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'b': box(startx,
starty, endx, endy, cc);

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'f':

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>fill_box(startx,
starty, endx, endy, cc); break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'l':

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;tab-stops:351.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>line(startx,
starty, endx, endy, cc);<span style='mso-tab-count:1'>                                                    </span>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'c':

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>circle(startx, starty,
endy-starty, cc);<span style="mso-spacerun: yes">  </span>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'h':

<p class=MsoNormal style='margin-left:88.0pt;text-indent:11.0pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>fill_circle(startx, starty, endy-starty, cc); break; case 's':

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;tab-stops:351.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>save_pic();<span
style='mso-tab-count:1'>                                                                                            </span>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'r':

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;tab-stops:351.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>load_pic();<span
style='mso-tab-count:1'>                                                                                             </span>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'm': /* пересылка
фрагмента */

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>move(startx, starty, endx, endy, x,
y);<span style="mso-spacerun: yes">   </span>break; 

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'x': /*
копирование фрагмента */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>copy(startx, starty,
endx, endy, x, y);<span style="mso-spacerun: yes">   </span>break;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>case 'd': /* определить поворот(cдвиг)
объекта */

<p class=MsoNormal style='margin-left:33.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* Внимание!! Во время
трансляции программы идентификатор object

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>был помечен как
&quot;неопределенный&quot;. Его описание действительно

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>отсутствует в этой
программе. (Ред. пер. И.Бычковский)

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:33.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>*/

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;tab-stops:351.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>sides
= define_objekt(object, x, y);<span style='mso-tab-count:1'>                                                   </span>break;

<p class=MsoNormal align=center style='text-align:center;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>case
'a': /* поворот(сдвиг) объекта */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>rotate_objekt(object,
0.05, x, y, sides); break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case '\r': /* набор
конечных точек для линий, кругов

<p class=MsoNormal style='margin-left:154.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>или прямоугольников */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(first_point)

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>startx = x, starty = y; 

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>endx = x, endy = y; 

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>first_point =
!first_point;break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'p':

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>pal_num = pal_num==1 ?
2:1;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>palette(pal_num);

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xhairs(x, y);

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>while (key.c[0]!='q');

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>getchar();

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mode(2);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Опишем кратко алгоритм работы программы рисования. Вначале
экран терминала устанавливается в 4 графический режим. Затем устанавливается
палитра 0, и графический курсор перемещается в верхний левый угол. Шаблон цвета
по умолчанию устанавливается в соответствии с кодом 2 (красный в палитре 0).
При перемещении графического курсора на экране остается след, который
окрашивается в соответствии с текущим цветом шаблона. Если нажимать клавиши
перемещения курсора, графический курсор перемещается на одну точку растра в
заданном направлении. Такая скорость перемещения может не удовлетворять
пользователя, поэтому в программе предусмотрена возможность смещения на 5 точек
растра путем нажатия клавиши F2. Отменить режим ускоренного перемещения можно
путем нажатия клавиши F1. Изменение цвета осуществляется при нажатии цифровых
клавиш от 0 до 3. В палитре 0 цифра 0 зарезервирована, 1 определяет зеленый
цвет, 2 - красный, 3 - желтый. Шаблон цвета может быть изменен путем нажатия
клавиши 0. Клавиши &lt;Курсор в левый верхний угол&gt; (&lt;HOME&gt;),
&lt;Страница вверх&gt; (&lt;PGUP&gt;), &lt;Страница вниз&gt; (&lt;PGDN&gt;) и
&lt;Кон&gt; (&lt;END&gt;) перемещают графический курсор в указанном направлении
и под углом в 45 градусов.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
11.1pt;margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>Для анализа кодов операций чтения в программах используется функция
bioskey(). Порядок подключения этой функции к программе

<p class=MsoNormal style='margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>при компиляции описан
в главе 1. В программу включены обращения к

<p class=MsoNormal style='margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>функциям, позволяющим
вам рисовать и закрашивать прямоугольники и

<p class=MsoNormal style='margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>окружности,<span
style="mso-spacerun: yes">  </span>рисовать линии,<span style="mso-spacerun:
yes">  </span>копировать и перемещать изображение

<p class=MsoNormal style='margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>на экране,<span
style="mso-spacerun: yes">  </span>сохранять на диске<span style="mso-spacerun:
yes">  </span>и<span style="mso-spacerun: yes">  </span>загружать<span
style="mso-spacerun: yes">  </span>с<span style="mso-spacerun: yes"> 
</span>него<span style="mso-spacerun: yes">  </span>содержимое

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>экрана, отображать и вращать объекты.

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;text-indent:27.5pt;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>При изображении линий, прямоугольников и окружностей
вам необходимо определить координаты двух точек. Для прямоугольников

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>-
это координаты двух противоположных углов. Для линий задается начальная и
конечная точки, а для окружности - координаты центра и точки, через которую она
будет проходить.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;text-align:justify;text-indent:
27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Процесс выбора этих точек выполняется путем нажатия
клавиши &lt;ВВОД&gt; в момент, когда графический курсор находится в требуемой
области. Например, для изображения линии вы перемещаете графический курсор в
точку, где она должна начинаться и нажимаете клавишу &lt;ВВОД&gt; . Затем вы
устанавливаете курсор в точку, где линия заканчивается, и нажимаете
&lt;ВВОД&gt; снова. При нажатии клавиши &lt;ВВОД&gt; выполняется загрузка
переменных startx, starty, endx и endy, которые потом используются в качестве
параметров вызываемых функций. После того, как координаты точек будут
определены, при нажатии клавиши &lt;В&gt; рисуется квадрат, а &lt;F&gt; -
квадрат закрашивается, при нажатии &lt;L&gt; рисуется линия, при нажатии
&lt;С&gt; рисуется окружность, а &lt;Н&gt; - окружность закрашивается.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;text-align:justify;text-indent:
27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Для копирования или перемещения части экрана вы должны
определить верхний левый и нижний правый углы области, которую вы хотите
переместить (нажатием клавиши &lt;ВВОД&gt; ). Затем вы перемещаете курсор в
верхний левый угол области, куда вы хотите переместить изображение. Для
пересылки изображения требуется нажать клавишу &lt;М&gt;, а для копирования -
&lt;Х&gt;. Запомните, что старое изображение в области, куда осуществляется
копирование, будет уничтожено.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:27.5pt;.0001pt;text-align:justify;text-indent:
27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>Для вращения объекта вам необходимо определить сам
объект, путем нажатия клавиши &lt;D&gt;. Затем, используя клавишу &lt;ВВОД&gt;,
вы должны определить начальные и конечные координаты точек для отрезков по
периметру выбранного объекта. Процесс выбора объекта вращения и определения его
границ реализуется функцией define_object(). Вращение объекта начинается после
нажатия клавиши &lt;А&gt;. Для определения направления вращения используются
клавиши &lt;L&gt; (по часовой стрелке) или &lt;R&gt; (против часовой стрелки).
Остановить процесс вращения можно нажатием любой клавиши, кроме &lt;L&gt; или
&lt;А&gt;.

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
11.1pt;margin-left:27.5pt;text-align:justify;text-indent:27.5pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>Для остановки работы программы используется клавиша &lt;Q&gt;. При
желании вы можете включить в программу функции для работы с &quot;мышью&quot;.
Пример выходных данных программы показан на рисунке 4-5.

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>_________________________________________________________________

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>Рисунок 4-5 на стр. 163 не может быть
воспроизведен имеющимися средствами. (Ред. пер. И.Бычковский)

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>_________________________________________________________________

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:27.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>Рис. 4-5. Простейшие результаты работы
программы рисования. 

<p class=MsoNormal align=center style='22.2pt;text-align:center;
mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt'>А теперь приведем всю программу рисования целиком. 

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:27.5pt;.0001pt;text-align:justify;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>/*
Программа для CGA/EGA, позволяющая рисовать линии, прямоугольники и окружности.
Вы можете нарисовать какой-либо объект и вращать его по часовой или против
часовой стрелки. Вы так же можете копировать графическое изображение на диск и
загружать его с диска. */

<p class=MsoNormal style='11.1pt;margin-right:4.4pt;
0cm;margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>#define NUM_SIDES 20
/* число сторон объекта;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;text-indent:132.0pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>при необходимости увеличивается */ #include &quot;dos.h&quot;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>#include
&quot;stdio.h&quot;

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>#include &quot;math.h&quot;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void mode(), line(),
box(), fill_box();

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void mempoint(),
palette(), xhairs();

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void circle(),
plot_circle(), fill_circle();

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void rotate_point(),
rotate_object(), goto_xy();

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void display_object(),
copy(), move();

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void save_pic(),
load_pic();

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>unsigned char read_point();

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/*<span
style="mso-spacerun: yes">  </span>Этот массив содержит динамически меняющиеся

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>координаты объекта.

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>*/

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>double
object[NUM_SIDES][4];

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>double asp_ratio; /*
содержит коэффициент сжатия для

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:170.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>окружностей */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:55.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>main()

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>union k

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>char c[2];

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:77.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int i;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>key ;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x=10, y=10; /*
текущая позиция экрана */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int cc=2;<span
style="mso-spacerun: yes">   </span>/* текущий цвет */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int on_flag=1; /*
признак использования карандаша */

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>int pal_num=1; /* номер палитры */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int startx=0,
starty=0, endx=0, endy=0;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int first_point=1;

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int inc=1; /* шаг
пересылки */

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int sides=0; /*
количество сторoн выбранного объекта */

<p class=MsoNormal style='0cm;margin-right:4.4pt;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>int i;

<p class=MsoNormal style='0cm;margin-right:4.4pt;22.2pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>mode(4); /* переключатель режима CGA/EGA
*/ 

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>palette(0); /* палитра 0 */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xhairs(x, y); /*
указатель курсора */

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>do

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>key.i = bioskey(0);

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xhairs(x, y);

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(!key.c[0])
switch(key.c[1])

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 75: /* влево */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x, y-inc, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y -= inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 77: /* вправо */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x, y+inc, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y += inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 72: /* вверх */

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x-inc, y, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x -= inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 80: /* вниз */

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x+inc, y, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x += inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 71: /* вверх и
влево */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x-inc, y-inc, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x -= inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y -= inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 73: /* вверх и
вправо */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x-inc, y+inc, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x -= inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y += inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 79: /* вниз и
влево */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x+inc, y-inc, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x += inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y -= inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 81: /* вниз и
вправо */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(on_flag) line(x, y,
x+inc, y+inc, cc);

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x += inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y += inc;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 59: /* F1 -
медленно */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>inc=1;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 60: /* F2 -
быстро<span style="mso-spacerun: yes">   </span>*/

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>inc=5;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else
switch(tolower(key.c[0]))


<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'o': /*
переключение шаблона */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>on_flag = !on_flag;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case '1': cc=1; /* цвет
1 */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case '2': cc=2; /*
цвет 2 */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case '3': cc=3; /*
цвет 3 */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case '0': cc=0; /*
цвет 0 */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'b':

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;tab-stops:351.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>box(startx,
starty, endx, endy, cc);<span style='mso-tab-count:1'>                                                    </span>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'f':

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>fill_box(startx,
starty, endx, endy, cc); break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'l':

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;tab-stops:351.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>line(startx,
starty, endx, endy, cc);<span style='mso-tab-count:1'>                                                    </span>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'c':

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>circle(startx, starty,
endy-starty, cc);<span style="mso-spacerun: yes">  </span>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'h':

<p class=MsoNormal style='margin-left:88.0pt;text-indent:11.0pt;mso-hyphenate:
none;mso-layout-grid-align:none;text-autospace:none'><span style='font-size:
10.0pt'>fill_circle(startx, starty, endy-starty, cc); break; case 's':

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;tab-stops:351.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>save_pic();<span
style='mso-tab-count:1'>                                                                                            </span>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'r':

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;tab-stops:351.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>load_pic();<span
style='mso-tab-count:1'>                                                                                             </span>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'm': /* пересылка
фрагмента */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>move(startx, starty,
endx, endy, x, y);<span style="mso-spacerun: yes">   </span>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'x': /*
копирование фрагмента */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>copy(startx, starty,
endx, endy, x, y);<span style="mso-spacerun: yes">   </span>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'd': /*
определить объект вращения */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;tab-stops:351.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>sides
= define_objekt(object, x, y);<span style='mso-tab-count:1'>                                                   </span>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'a': /* вращение
объекта */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>rotate_objekt(object,
0.05, x, y, sides); break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case '\r': /* набор
конечных точек для линий, кругов

<p class=MsoNormal style='margin-left:165.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>или прямоугольников */

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if(first_point)

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>startx = x, starty = y; 

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>endx = x, endy = y; 

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;tab-stops:351.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>first_point
= !first_point;<span style='mso-tab-count:1'>                                                                    </span>break;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>case 'p':

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>pal_num = pal_num==1 ?
2:1;

<p class=MsoNormal style='margin-left:99.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>palette(pal_num);

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xhairs(x, y);

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>while (key.c[0]!='q');

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>getchar();

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mode(2);

<p class=MsoNormal style='0cm;margin-right:4.4pt;0cm;
margin-left:66.0pt;.0001pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* установка палитры
*/

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void palette(pnum)

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>int pnum; 

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>union REGS r;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.bh = 1; /* код 4
режима графики */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.bl = pnum;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.ah = 11; /*
установка палитры */

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int86(0x10, &amp;r,
&amp;r);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* установка
видео-режима */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void mode (mode_code)

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int mode_code;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>union REGS r;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.al = mode_code;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>r.h.ah = 0;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int86(0x10,&amp;r,
&amp;r);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* изображение
прямоугольника */

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void box(sx, sy, ex,
ey, c)

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int sx, sy, ex, ey, c;

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(sx, sy, ex, sy,
c);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(sx, sy, sx, ey,
c);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(sx, ey, ex, ey,
c);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(ex, sy, ex, ey,
c);

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:33.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* изображение линии
заданного цвета с использованием

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>алгоритма Брезенхама
*/

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
line(startx,starty,endx,endy,color)

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
startx,starty,endx,endy,color;

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>register int
t,distance;

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
xerr=0,yerr=0,delta_x,delta_y;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>int incx,incy;

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;tab-stops:362.5pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>/*
вычисление расстояния в обоих направлениях<span style='mso-tab-count:1'>                                                      </span>*/

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta_x=endx-startx;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>delta_y=endy-starty;

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* определение
направления шага,

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>шаг вычисляется либо
по вертикальной, либо горизонтальной

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;tab-stops:199.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>линии<span
style='mso-tab-count:1'>                                                     </span>*/

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (delta_x&gt;0)
incx=1;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else<span
style="mso-spacerun: yes">  </span>if (delta_x==0) incx=0;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>else<span style="mso-spacerun: yes"> 
</span>incx= -1;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (delta_y&gt;0)
incy=1;

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else<span
style="mso-spacerun: yes">  </span>if (delta_y==0) incy=0;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>else<span style="mso-spacerun: yes"> 
</span>incy= -1;

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>/* определение какое расстояние больше */ 

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta_x=abs(delta_x);

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta_y=abs(delta_y);

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if
(delta_x&gt;delta_y) distance=delta_x;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>else distance=delta_y;

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* изображение линии
*/

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (t=0;
t&lt;=distance+1; t++) 

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(startx,starty,color);

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xerr+=delta_x;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>yerr+=delta_y;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (xerr&gt;distance) 

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>xerr-=distance;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>startx+=incx;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (yerr&gt;distance) 

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>yerr-=distance;

<p class=MsoNormal style='margin-left:88.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>starty+=incy;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:55.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:38.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>/* закрашивание прямоугольника в заданный
цвет */

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
fill_box(startx,starty,endx,endy,color_code)

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
startx,starty,endx,endy,color_code;

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>register int i,begin,end;

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>begin=startx&lt;endx ?
startx:endx;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>end=startx&gt;endx ? startx:endx;

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(i=begin;i&lt;=end;++i)

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>line(i,starty,i,endy,color_code);

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><span
style="mso-spacerun: yes"> </span>

<p class=MsoNormal style='margin-left:44.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* изображение<span
style="mso-spacerun: yes">   </span>окружности<span style="mso-spacerun:
yes">   </span>с<span style="mso-spacerun: yes">    </span>использованием<span
style="mso-spacerun: yes">    </span>алгоритма

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>Брезенхама */

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void
circle(x_center,y_center,radius,color_code)

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int
x_center,y_center,radius,color_code;

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:66.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>register x,y,delta;

<p class=MsoNormal align=center style='text-align:center;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>asp_ratio=1.0;
/* это число меняется в различных

<p class=MsoNormal align=center style='text-align:center;mso-hyphenate:none;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt'>случаях
*/

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y=radius;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta=3-2*radius;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for (x=0;x&lt;y; ) 

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>plot_circle(x,y,x_center,y_center,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (delta&lt;0)

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>delta+=4*x+6;

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>else 

<p class=MsoNormal style='0cm;margin-right:0cm;22.2pt;
margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>delta+=4*(x-y)+10; 

<p class=MsoNormal style='margin-left:110.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>y--;

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x++;

<p class=MsoNormal style='margin-left:71.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>x=y;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>if (y)
plot_circle(x,y,x_center,y_center,color_code);

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:49.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>/* plot_circle
печатает точки, определяющие окружность */

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>void plot_circle(x, y,
x_center, y_center, color_code)

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x_center,y_center,radius,color_code;

<p class=MsoNormal style='margin-left:60.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>int x, y, startx,
starty, endx, endy, x1, y1;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>starty=y*asp_ratio;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>endy=(y+1)*asp_ratio;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>startx=x*asp_ratio;

<p class=MsoNormal style='0cm;margin-right:0cm;11.1pt;
margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:none;text-autospace:
none'><span style='font-size:10.0pt'>endx=(x+1)*asp_ratio;

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(x1=startx;x1&lt;endx;++x1) 

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x1+x_center,y+y_center,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x1+x_center,y_center-y,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x_center-x1,y+y_center,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x_center-x1,y_center-y,color_code);

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'><![if !supportEmptyParas]>&nbsp;<![endif]>

<p class=MsoNormal style='margin-left:77.0pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>for
(y1=starty;y1&lt;endy;++y1) 

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(y1+x_center,x+y_center,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(y1+x_center,y_center-x,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x_center-y1,x+y_center,color_code);

<p class=MsoNormal style='margin-left:93.5pt;mso-hyphenate:none;mso-layout-grid-align:
none;text-autospace:none'><span style='font-size:10.0pt'>mempoint(x_center-y1,y_center-x,color_code);

</body>

</html><!--Saved from http://mymanual.narod.ru>
