<HTML><HEAD>
<TITLE>Функция freopen</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=Windows-1251"> 
<LINK REL=STYLESHEET TYPE="text/css" HREF="../work/css.css">
</HEAD><BODY>
<A href="../main.htm#13">Содержание</A> | <A href="13.htm#00">Глава 13</A><HR>
<H1>Функция freopen</H1>
<PRE>
#include &lt;stdio.h&gt;
FILE *freopen(const char *<I>fname</I>, const char *<I>mode</I>, FILE *<I>stream</I>);
</PRE>
<P class="tj">Функция <KBD>freopen()</KBD> связывает существующий поток с другим файлом. Имя нового файла задается параметром <I>fname</I>, режим доступа — параметром <I>mode</I>, a переназначаемый поток определяется указателем <I>stream</I>. Возможные значения строки <I>mode</I> — те же, что и для функции <KBD>fopen()</KBD> (полное их описание можно найти в разделе, посвященном описанию <KBD>fopen</KBD>).
<P class="tj">В версии C99 к параметрам <I>fname</I>, <I>mode</I> и <I>stream</I> применен квалификатор <KBD>restrict</KBD>.
<P class="tj">При вызове функция <KBD>freopen()</KBD> сначала пытается закрыть файл, который в данный момент связан с потоком <I>stream</I>. Ho даже если этот файл закрыть не удается, <KBD>freopen()</KBD> открывает другой файл.
<P class="tj">При успешном выполнении функция <KBD>freopen()</KBD> возвращает указатель на поток, а в противном случае — нулевой указатель.
<P class="tj">Чаще всего функция <KBD>freopen()</KBD> используется для перенаправления таких определенных системой файлов, как <KBD>stdin</KBD>, <KBD>stdout</KBD> и <KBD>stderr</KBD>, в какой-то другой.
<H2>Пример</H2>
<P class="tj">Приведенная здесь программа использует функцию <KBD>freopen()</KBD>, чтобы перенаправить поток <KBD>stdout</KBD> в файл с названием OUT. Первое сообщение программы выводится на экран, а второе, перенаправленное, записывается функцией <KBD>freopen()</KBD>, в файл на диске.
<PRE>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main(void)
{
  FILE *fp;

  printf("Это сообщение появится на экране.\n");

  if((fp=freopen("OUT", "w" ,stdout))==NULL) {
    printf("Не удается открыть файл.\n");
    exit(1);
  }

  printf("Это сообщение будет записано в файл OUT.");

  fclose(fp);

  return 0;
}
</PRE>
<H2>Зависимые функции</H2>
<A href="fopen.htm">fopen()</A>  <A href="fclose.htm">fclose()</A>
<HR><A href="../main.htm#13">Содержание</A> | <A href="13.htm#00">Глава 13</A>
</BODY></HTML>