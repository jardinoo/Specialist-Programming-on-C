<HTML><HEAD>
<TITLE>Функция strtol</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=Windows-1251"> 
<LINK REL=STYLESHEET TYPE="text/css" HREF="../work/css.css">
</HEAD><BODY>
<A href="../main.htm#18">Содержание</A> | <A href="18.htm#00">Глава 18</A><HR>
<H1>Функция strtol</H1>
<PRE>
#include &lt;stdlib.h&gt;
long int strtol(const char *<I>start</I>, char **<I>end</I>, int <I>radix</I>);
</PRE>
<P class="tj">Функция <KBD>strtol()</KBD> преобразует строковое представление числа, которое содержится в строке, адресуемой параметром-указателем <I>start</I>, в значение типа <KBD>long int</KBD> и возвращает полученный результат. Основание системы счисления, в которой представлено преобразуемое число, определяется параметром <I>radix</I>. Если значение <I>radix</I> равно нулю, то основание определяется так же, как и основание системы счисления при записи констант. Если значение <I>radix</I> не равно нулю, то оно должно быть целым числом от 2 до 36.
<P class="tj">В версии С99 к параметрам <I>start</I> и <I>end</I> применен квалификатор <KBD>restrict</KBD>.
<P class="tj">Функция <KBD>strtol()</KBD> работает следующим образом:
<P class="tj">Сначала в строке, адресуемой параметром <I>start</I>, пропускаются пробелы, символы табуляции и пустой строки. Затем считывается число. Считывание заканчивается как только будет обнаружен символ, который не может быть частью длинного целого числа. К таким символам относятся пробелы, символы табуляции и пустой строки, знаки препинания и другие символы. Наконец, параметр <I>end</I> устанавливается так, чтобы указывать на "неиспользованный" остаток исходной строки, если таковой существует. Это означает, что, если функция <KBD>strtol()</KBD> вызывается с аргументом <PRE>"100 клещей"</PRE><P class="t">она возвратит значение <PRE>100L</PRE><P class="t">а параметр <I>end</I> будет указывать на пробел, предшествующий слову <PRE>"клещей"</PRE>
<P class="tj">Если результат не может быть представлен как значение типа <KBD>long int</KBD>, функция <KBD>strtol()</KBD> возвращает либо значение <KBD>LONG_MAX</KBD>, либо значение <KBD>LONG_MIN</KBD>, а глобальная переменная <KBD>errno</KBD> устанавливается равной значению <KBD>ERANGE</KBD>, свидетельствующему об ошибке из-за выхода за границы представимых чисел. Если параметр <I>start</I> не указывает на число, никакого преобразования не выполняется и функция возвращает нуль.
<H2>Пример</H2>
<P class="tj">Следующая функция может использоваться для чтения из стандартного входного потока числа, представленного в десятичной системе счисления. Данная функция возвращает результат (целое число) типа <KBD>long</KBD>.
<PRE>
long int read_long(void)
{
  char start[80], *end;

  printf("Введите число: ");
  gets(start);
  return strtol(start, &end, 10);
}
</PRE>
<H2>Зависимые функции</H2>
<A href="atol.htm">atol()</A>  <A href="strtoll.htm">strtoll()</A>
<HR><A href="../main.htm#18">Содержание</A> | <A href="18.htm#00">Глава 18</A>
</BODY></HTML>