<HTML><HEAD>
<TITLE>Функция mbtowc</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=Windows-1251"> 
<LINK REL=STYLESHEET TYPE="text/css" HREF="../work/css.css">
</HEAD><BODY>
<A href="../main.htm#18">Содержание</A> | <A href="18.htm#00">Глава 18</A><HR>
<H1>Функция mbtowc</H1>
<PRE>
#include &lt;stdlib.h&gt;
int mbtowc(wchar_t *<I>out</I>, const char *<I>in</I>, size_t <I>size</I>);
</PRE>
<P class="tj">Функция <KBD>mbtowc()</KBD> преобразует многобайтовый символ, который содержится в массиве, адресуемом параметром <I>in</I>, в его двухбайтовый эквивалент и помещает результат в объект, адресуемый параметром <I>out</I>. Преобразованию подлежат только первые <I>size</I> символов.
<P class="tj">В версии С99 к параметрам <I>out</I> и <I>in</I> применен квалификатор <KBD>restrict</KBD>.
<P class="tj">Функция возвращает количество байтов, помещенных в объект <I>out</I>. При возникновении ошибки возвращается значение -1. Если указатель <I>in</I> нулевой, функция <KBD>mbtowc()</KBD> возвращает ненулевое значение в случае, когда многобайтовые символы имеют кодировку, зависящую от территориально-языковых особенностей. В противном случае возвращается нуль.
<H2>Пример</H2>
<P class="tj">Этот оператор преобразует многобайтовый символ в <I>mbstr</I> в его двухбайтовый эквивалент символа и помещает результат в массив, адресуемый указателем <I>widenonn</I>. (Преобразуются только первые 2 байта <I>mbstr</I>.)
<PRE>
mbtowc(widenonn, mbstr, 2);
</PRE>
<H2>Зависимые функции</H2>
<A href="mblen.htm">mblen()</A>  <A href="wctomb.htm">wctomb()</A>
<HR><A href="../main.htm#18">Содержание</A> | <A href="18.htm#00">Глава 18</A>
</BODY></HTML>