<HTML><HEAD>
<TITLE>Функция strftime</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=Windows-1251"> 
<LINK REL=STYLESHEET TYPE="text/css" HREF="../work/css.css">
</HEAD><BODY>
<A href="../main.htm#16">Содержание</A> | <A href="16.htm#00">Глава 16</A><HR>
<H1>Функция strftime</H1>
<PRE>
#include &lt;time.h&gt; 
size_t strftime(char *<I>str</I>, size_t <I>maxsize</I>, const char *<I>fmt</I>,
                const struct tm *<I>time</I>);
</PRE>
<P class="tj">Функция <KBD>strftime()</KBD> помещает информацию о времени и дате (вместе с другой информацией) в строку, адресуемую параметром <I>str</I>, в соответствии с командами форматирования, которые содержатся в адресуемой параметром <I>fmt</I> строке. Эта функция использует разделенное на компоненты время, на которое указывает указатель <I>time</I>. В строку <I>str</I> будет помещено не более <I>maxsize</I> символов.
<P class="tj">В версии С99 к параметрам <I>str</I>, <I>fmt</I> и <I>time</I> применен квалификатор <KBD>restrict</KBD>.
<P class="tj">Работа функции <KBD>strftime()</KBD> напоминает работу функции <KBD>sprintf()</KBD> в том, что она распознает набор команд форматирования, которые начинаются со знака процента (%), и помещает отформатированный результат в строку. Команды форматирования используются для задания точного способа представления различных данных времени и даты в параметре <I>str</I>. Любые другие символы, содержащиеся в строке форматирования, помещаются в строку <I>str</I> без изменений. Время и дата отображаются по местному времени. Команды форматирования перечислены в следующей таблице. Обратите внимание на то, что во многих командах прописные и строчные буквы имеют различную интерпретацию.
<P class="tj">Функция <KBD>strftime()</KBD> возвращает количество символов, помещенных в строку, адресуемую параметром <I>str</I>, или нуль при возникновении ошибки.
<TABLE align=center border=1 width=100%>
<TR><TH><I>Код</I><TH><I>Замещается</I>	
<TR><TD>%a<TD>Сокращенное название дня недели
<TR><TD>%A<TD>Полное название дня недели
<TR><TD>%b<TD>Сокращенное название месяца
<TR><TD>%B<TD>Полное название месяца
<TR><TD>%c<TD>Стандартная строка даты и времени
<TR><TD>%C<TD>Две последние цифры года
<TR><TD>%d<TD>День месяца в виде десятичного числа (1-31)
<TR><TD>%D<TD>Дата в виде месяц/день/год (добавлено в версии С99)
<TR><TD>%e<TD>День месяца в виде десятичного числа (1-31) в двух-символьном поле (добавлено в С99)
<TR><TD>%F<TD>Дата в виде "год-месяц-день" (добавлено в С99)
<TR><TD>%g<TD>Последние две цифры года с использованием понедельного года (добавлено в С99)
<TR><TD>%G<TD>Год с использованием понедельного года (добавлено в С99)
<TR><TD>%h<TD>Сокращенное название месяца (добавлено в С99)
<TR><TD>%Н<TD>Час (0-23)
<TR><TD>%j<TD>Час (1-12)
<TR><TD>%j<TD>День года в виде десятичного числа (1-366)
<TR><TD>%m<TD>Месяц в виде десятичного числа (1-12)
<TR><TD>%M<TD>Минуты в виде десятичного числа (0-59)
<TR><TD>%n<TD>Разделитель строк (добавлено в С99)
<TR><TD>%p<TD>Местный эквивалент AM (до полудня) или РМ (после полудня)
<TR><TD>%r<TD>12-часовое время (добавлено в С99)
<TR><TD>%R<TD>Время в виде чч:мм (добавлено в С99)
<TR><TD>%S<TD>Секунды в виде десятичного числа (0-60)
<TR><TD>%T<TD>Горизонтальная табуляция (добавлено в С99)
<TR><TD>%T<TD>Время в виде чч:мм:сс (добавлено в С99)
<TR><TD>%u<TD>День недели; понедельник — первый день недели (0-6) (добавлено в С99)
<TR><TD>%U<TD>Неделя года; воскресенье — первый день недели (0-53)
<TR><TD>%V<TD>Неделя года с использованием понедельного года (добавлено в С99)
<TR><TD>%w<TD>День недели в виде десятичного числа (0-6, воскресенье — 0-й день)
<TR><TD>%W<TD>Неделя года; понедельник — первый день недели (0-53)
<TR><TD>%x<TD>Стандартная строка даты
<TR><TD>%X<TD>Стандартная строка времени
<TR><TD>%y<TD>Год в виде десятичного числа без столетия (0-99)
<TR><TD>%Y<TD>Год в вуде десятичного числа, включающего столетие
<TR><TD>%z<TD>Сдвиг относительно координированного всемирного (UTC) времени (добавлено в С99)
<TR><TD>%Z<TD>Название часового пояса
<TR><TD>%%<TD>Знак процента
</TABLE>
<P class="tj">Версия С99 позволяет использовать в функции <KBD>strftime()</KBD> определенные команды форматирования с модификаторами Е и O. Модификатор Е может модифицировать такие команды, как с, C, х, X, у, Y, d, e и H. Модификатор O может модифицировать команды: I, m, M, S, u, U, V, w, W и y. Использование этих модификаторов приводит к альтернативному представлению отображаемого времени и/или даты. За подробностями обращайтесь к документации, поставляемой вместе с используемым вами компилятором.
<P class="tj">Понедельный год используется командами форматирования %g, %G и %V. При таком представлении первым днем недели является понедельник, а первая неделя года должна включать день с датой "4 января".
<H2>Пример</H2>
<P class="tj">Предположим, что <KBD>ltime</KBD> указывает на структуру, которая содержит 10:00:00 AM. Следующая программа печатает: "Сейчас 10 AM.":
<PRE>
#include &lt;time.h&gt;
#include &lt;stdio.h&gt;

int main(void)
{
  struct tm *ptr;
  time_t lt;
  char str[80];

  lt = time(NULL);
  ptr = localtime(&lt);

  strftime(str, 100, "Сейчас %H %p.", ptr);
  printf(str);

  return 0;
}
</PRE>
<H2>Зависимые функции</H2>
<A href="time.htm">time()</A>  <A href="localtime.htm">localtime()</A>  <A href="gmtime.htm">gmtime()</A>
<HR><A href="../main.htm#16">Содержание</A> | <A href="16.htm#00">Глава 16</A>
</BODY></HTML>